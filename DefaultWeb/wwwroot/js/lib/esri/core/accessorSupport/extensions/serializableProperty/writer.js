//>>built
define(["require","exports","dojo/_base/lang","./type"],function(r,k,h,m){function n(a,b,e,c){h.setObject(e,g(a,c),b)}function g(a,b){return a&&"function"==typeof a.write?a.write({},b):a&&"function"==typeof a.toJSON?a.toJSON():"number"==typeof a?a===-(1/0)?-Number.MAX_VALUE:a===1/0?Number.MAX_VALUE:isNaN(a)?null:a:a}function p(a,b,e,c){var d;null===a?d=null:a&&"function"==typeof a.map?(d=a.map(function(a){return g(a,c)}),"function"==typeof d.toArray&&(d=d.toArray())):d=[g(a,c)];h.setObject(e,d,b)}
function l(a,b,e){return 0!==e&&Array.isArray(a)?a.map(function(a){return l(a,b,e-1)}):g(a,b)}function q(a){return function(b,e,c,d){if(null===b)b=null;else{b=l(b,d,a);d=a;for(var f=b;0<d&&Array.isArray(f);)d--,f=f[0];if(void 0!==f)for(f=0;d>f;f++)b=[b]}h.setObject(c,b,e)}}Object.defineProperty(k,"__esModule",{value:!0});k.create=function(a,b,e,c){c.write&&!c.write.writer&&!1!==c.write.enabled&&(1===b||m.isCollection(a)?c.write.writer=p:1<b?c.write.writer=q(b):c.write.writer=n)}});