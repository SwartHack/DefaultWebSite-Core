//>>built
define(["require","exports"],function(B,m){function p(a,d){var b=d[0]-a[0],c=d[1]-a[1];return 2<a.length&&2<d.length?(a=a[2]-d[2],Math.sqrt(b*b+c*c+a*a)):Math.sqrt(b*b+c*c)}function v(a,d,b){var c=a[0]+b*(d[0]-a[0]),e=a[1]+b*(d[1]-a[1]);return 2<a.length&&2<d.length?[c,e,a[2]+b*(d[2]-a[2])]:[c,e]}function w(a,d){return v(a,d,.5)}function y(a,d,b){var c=b[0];b=b[1];for(var e=0,g=0,k=d.length;k>g;g++){e++;e===k&&(e=0);var h=d[g],f=h[0],h=h[1],l=d[e],n=l[0],l=l[1];(b>h&&l>=b||b>l&&h>=b)&&c>f+(b-h)/(l-
h)*(n-f)&&(a=!a)}return a}function z(a,d,b,c){for(var e=0,g=0,k=0,h=0,f=0,l=0,n=d.length-1;n>l;l++){var x=d[l],m=x[0],r=x[1],t=x[2],p=d[l+1],q=p[0],v=p[1],w=p[2],u=m*v-q*r,h=h+u,e=e+(m+q)*u,g=g+(r+v)*u;b&&2<x.length&&2<p.length&&(u=m*w-q*t,k+=(t+w)*u,f+=u);m<c[0]&&(c[0]=m);m>c[1]&&(c[1]=m);r<c[2]&&(c[2]=r);r>c[3]&&(c[3]=r);b&&(t<c[4]&&(c[4]=t),t>c[5]&&(c[5]=t))}return 0<h&&(h*=-1),0<f&&(f*=-1),h?(a[0]=e,a[1]=g,a[2]=.5*h,b?(a[3]=k,a[4]=.5*f):a.length=3):a.length=0,a}function A(a,d){for(var b=d?[0,
0,0]:[0,0],c=d?[0,0,0]:[0,0],e=0,g=0,k=0,h=0,f=0,l=a.length;l-1>f;f++){var n=a[f],m=a[f+1];n&&m&&(b[0]=n[0],b[1]=n[1],c[0]=m[0],c[1]=m[1],d&&2<n.length&&2<m.length&&(b[2]=n[2],c[2]=m[2]),length=p(b,c),length)&&(e+=length,n=w(n,m),g+=length*n[0],k+=length*n[1],d&&2<n.length&&(h+=length*n[2]))}return 0<e?d?[g/e,k/e,h/e]:[g/e,k/e]:a.length?a[0]:null}function q(a,d){var b=a[0],c=b[0],b=b[1],e=a[1];a=e[0];var e=e[1],g=d[0],k=g[0],h=g[1],f=d[1];d=f[0]-k;var k=c-k,g=a-c,f=f[1]-h,h=b-h,l=e-b,n=f*g-d*l;if(0===
n)return null;d=(d*h-f*k)/n;k=(g*h-l*k)/n;return 0<=d&&1>=d&&0<=k&&1>=k?[c+d*(a-c),b+d*(e-b)]:null}Object.defineProperty(m,"__esModule",{value:!0});m.geometryToCoordinates=function(a){if(!a)return null;if(Array.isArray(a))return a;var d=a.hasZ,b=a.hasM;if("point"===a.type)return b&&d?[a.x,a.y,a.z,a.m]:d?[a.x,a.y,a.z]:b?[a.x,a.y,a.m]:[a.x,a.y];if("polygon"===a.type)return a.rings.slice(0);if("polyline"===a.type)return a.paths.slice(0);if("multipoint"===a.type)return a.points.slice(0);if("extent"===
a.type){a=a.clone().normalize();if(!a)return null;var c=!1,e=!1;return a.forEach(function(a){a.hasZ&&(c=!0);a.hasM&&(e=!0)}),a.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(c&&a.hasZ)for(var d=.5*(a.zmax-a.zmin),f=0;f<b.length;f++)b[f].push(d);if(e&&a.hasM)for(a=.5*(a.mmax-a.mmin),f=0;f<b.length;f++)b[f].push(a);return b})}return null};m.getLength=p;m.getMidpoint=w;m.contains=function(a,d){if(!a)return!1;if(!Array.isArray(a[0][0]))return y(!1,
a,d);for(var b=!1,c=0,e=a.length;e>c;c++)b=y(b,a[c],d);return b};m.getPathLength=function(a){for(var d=a.length,b=0,c=0;d-1>c;++c)b+=p(a[c],a[c+1]);return b};m.getPointOnPath=function(a,d){if(0>=d)return a[0];for(var b=a.length,c=0,e=0;b-1>e;++e){var g=p(a[e],a[e+1]);if(g>d-c)return v(a[e],a[e+1],(d-c)/g);c+=g}return a[b-1]};m.isClockwise=function(a,d,b){for(var c=a.length,e=0,g=0,k=0,h=0;c>h;h++){var f=a[h],l=a[(h+1)%c],n=2,e=e+(f[0]*l[1]-l[0]*f[1]);2<f.length&&2<l.length&&b&&(g+=f[0]*l[2]-l[0]*
f[2],n=3);f.length>n&&l.length>n&&d&&(k+=f[0]*l[n]-l[0]*f[n])}return 0>=e&&0>=g&&0>=k};m.isSelfIntersecting=function(a){for(var d=0;d<a.length;d++){for(var b=a[d],c=0;c<b.length-1;c++)for(var e=[[b[c][0],b[c][1]],[b[c+1][0],b[c+1][1]]],g=d+1;g<a.length;g++)for(var k=0;k<a[g].length-1;k++){var h=[[a[g][k][0],a[g][k][1]],[a[g][k+1][0],a[g][k+1][1]]],f=q(e,h);if(f&&!(f[0]===e[0][0]&&f[1]===e[0][1]||f[0]===h[0][0]&&f[1]===h[0][1]||f[0]===e[1][0]&&f[1]===e[1][1]||f[0]===h[1][0]&&f[1]===h[1][1]))return!0}k=
b.length;if(!(4>=k))for(c=0;k-3>c;c++){var l=k-1;0===c&&(l=k-2);e=[[b[c][0],b[c][1]],[b[c+1][0],b[c+1][1]]];for(g=c+2;l>g;g++)if(h=[[b[g][0],b[g][1]],[b[g+1][0],b[g+1][1]]],(f=q(e,h))&&!(f[0]===e[0][0]&&f[1]===e[0][1]||f[0]===h[0][0]&&f[1]===h[0][1]||f[0]===e[1][0]&&f[1]===e[1][1]||f[0]===h[1][0]&&f[1]===h[1][1]))return!0}}return!1};m.ringsCentroid=function(a,d,b){var c,e,g=[];a.length=0;for(var k=b?[1/0,-(1/0),1/0,-(1/0),1/0,-(1/0)]:[1/0,-(1/0),1/0,-(1/0)],h=0,f=d.length;f>h;h++)c=z([],d[h],b,k),
c.length&&g.push(c);(g.sort(function(a,c){var d=a[2]-c[2];return 0===d&&b&&(d=a[4]-c[4]),d}),g.length&&(e=6*g[0][2],a[0]=g[0][0]/e,a[1]=g[0][1]/e,b&&(e=6*g[0][4],0!==e?a[2]=g[0][3]/e:a[2]=0),(a[0]<k[0]||a[0]>k[1]||a[1]<k[2]||a[1]>k[3]||b&&(a[2]<k[4]||a[2]>k[5]))&&(a.length=0)),a.length)||(d=d[0]&&d[0].length?A(d[0],b):null)&&(a[0]=d[0],a[1]=d[1],b&&2<d.length&&(a[2]=d[2]));return a};m._getLineIntersection2=q});