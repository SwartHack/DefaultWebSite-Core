//>>built
define("require exports ../Point ../Polygon ../Polyline ../SpatialReference".split(" "),function(K,h,G,H,I,J){function B(a,q,d,e){var l,n,b,c,g=1/298.257223563,k=Math.sin(d);d=Math.cos(d);var m=(1-g)*Math.tan(a);a=1/Math.sqrt(1+m*m);for(var u=m*a,t=Math.atan2(m,d),m=a*k*a*k,p=1-m,f=2.7233160610754688E11*p/4.040829998466145E13,A=1+f/16384*(4096+f*(-768+f*(320-175*f))),r=f/1024*(256+f*(-128+f*(74-47*f))),f=e/(6356752.31424518*A),v=2*Math.PI;1E-12<Math.abs(f-v);)b=Math.cos(2*t+f),l=Math.sin(f),n=Math.cos(f),
c=r*l*(b+r/4*(n*(-1+2*b*b)-r/6*b*(-3+4*l*l)*(-3+4*b*b))),v=f,f=e/(6356752.31424518*A)+c;e=u*l-a*n*d;p=g/16*p*(4+g*(4-3*p));return new G((q+(Math.atan2(l*k,a*n-u*l*d)-(1-p)*g*Math.sqrt(m)*(f+p*l*(b+p*n*(-1+2*b*b)))))/(Math.PI/180),Math.atan2(u*n+a*l*d,(1-g)*Math.sqrt(m+e*e))/(Math.PI/180),new J({wkid:4326}))}function D(a,q,d,e){var l,n,b,c,g,k,m,u,t,p,f=1/298.257223563,A=e-q,r=Math.atan((1-f)*Math.tan(a));c=Math.atan((1-f)*Math.tan(d));var v=Math.sin(r),r=Math.cos(r),h=Math.sin(c),w=Math.cos(c),y=
1E3,x=A;do{if(m=Math.sin(x),u=Math.cos(x),b=Math.sqrt(w*m*w*m+(r*h-v*w*u)*(r*h-v*w*u)),0===b)return{geodesicDistance:0};g=v*h+r*w*u;k=Math.atan2(b,g);t=r*w*m/b;n=1-t*t;c=g-2*v*h/n;isNaN(c)&&(c=0);p=f/16*n*(4+f*(4-3*n));l=x;x=A+(1-p)*f*t*(k+p*b*(c+p*g*(-1+2*c*c)))}while(1E-12<Math.abs(x-l)&&0<--y);if(0===y)return b=e-q,{geodesicDistance:6371009*Math.acos(Math.sin(a)*Math.sin(d)+Math.cos(a)*Math.cos(d)*Math.cos(e-q)),azimuth:Math.atan2(Math.sin(b)*Math.cos(d),Math.cos(a)*Math.sin(d)-Math.sin(a)*Math.cos(d)*
Math.cos(b))};a=2.7233160610754688E11*n/4.040829998466145E13;q=a/1024*(256+a*(-128+a*(74-47*a)));return{geodesicDistance:6356752.31424518*(1+a/16384*(4096+a*(-768+a*(320-175*a))))*(k-q*b*(c+q/4*(g*(-1+2*c*c)-q/6*c*(-3+4*b*b)*(-3+4*c*c)))),azimuth:Math.atan2(w*Math.sin(x),r*h-v*w*Math.cos(x)),reverseAzimuth:Math.atan2(r*Math.sin(x),r*h*Math.cos(x)-v*w)}}function E(a,q){var d=Math.PI/180;if(637.100877151506>q&&(q=637.100877151506),"polyline"!==a.type&&"polygon"!==a.type)throw console.error("_geodesicDensify: the input geometry is neither polyline nor polygon"),
Error("_geodesicDensify: the input geometry is neither polyline nor polygon");for(var e=[],l=0,n="polyline"===a.type?a.paths:a.rings;l<n.length;l++){var b=n[l],c=[];e.push(c);c.push([b[0][0],b[0][1]]);for(var g=b[0][0]*d,k=b[0][1]*d,m=void 0,u=void 0,t=0;t<b.length-1;t++)if(m=b[t+1][0]*d,u=b[t+1][1]*d,g!==m||k!==u){var p=D(k,g,u,m),f=p.azimuth,p=p.geodesicDistance,h=p/q;if(1<h){for(var r=1;h-1>=r;r++){var v=B(k,g,f,r*q);c.push([v.x,v.y])}h=B(k,g,f,(p+Math.floor(h-1)*q)/2);c.push([h.x,h.y])}k=B(k,
g,f,p);c.push([k.x,k.y]);g=k.x*d;k=k.y*d}}return"polyline"===a.type?new I({paths:e,spatialReference:a.spatialReference}):new H({rings:e,spatialReference:a.spatialReference})}function C(a,q){var d=Math.PI/180,e=Math.sin(q[1]*d),e=.9933056200098026*(e/(1-.006694379990197414*e*e)-6.111035746609262*Math.log((1-.0818191908429643*e)/(1+.0818191908429643*e)));return a[0]=6378137*q[0]*d,a[1]=3189068.5*e,a}Object.defineProperty(h,"__esModule",{value:!0});var F={esriMiles:1,esriKilometers:1.609344,esriFeet:5280,
esriMeters:1609.34,esriYards:1760,esriNauticalMiles:.869,esriCentimeters:160934,esriDecimeters:16093.4,esriInches:63360,esriMillimeters:1609340,esriAcres:1,esriAres:40.4685642,esriSquareKilometers:.00404685642,esriSquareMiles:.0015625,esriSquareFeet:43560,esriSquareMeters:4046.85642,esriHectares:.404685642,esriSquareYards:4840,esriSquareInches:6272640,esriSquareMillimeters:4046856420,esriSquareCentimeters:4.04685642E7,esriSquareDecimeters:404685.642};h.directGeodeticSolver=B;h.inverseGeodeticSolver=
D;h.geodesicDensify=E;h.geodesicLengths=function(a,q){for(var d=Math.PI/180,e=[],l=0;l<a.length;l++){for(var n=a[l].paths,b=0,c=0;c<n.length;c++){for(var g=n[c],k=0,m=1;m<g.length;m++){var h=g[m-1][0]*d,t=g[m][0]*d,p=g[m-1][1]*d,f=g[m][1]*d;if(p!==f||h!==t)h=D(p,h,f,t),k+=h.geodesicDistance/1609.344}b+=k}b*=F[q];e.push(b)}return e};var y=[0,0],z=[0,0];h.geodesicAreas=function(a,h){for(var d=[],e=0;e<a.length;e++){var l=E(a[e],1E4);d.push(l)}a=[];for(e=0;e<d.length;e++){for(var l=d[e].rings,n=0,b=
0;b<l.length;b++){var c=l[b];C(y,c[0]);C(z,c[c.length-1]);for(var g=z[0]*y[1]-y[0]*z[1],k=0;k<c.length-1;k++)C(y,c[k+1]),C(z,c[k]),g+=z[0]*y[1]-y[0]*z[1];g/=4046.87;n+=g}n*=F[h];a.push(n/-2)}return a}});