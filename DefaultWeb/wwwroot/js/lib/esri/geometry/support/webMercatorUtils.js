//>>built
define(["require","exports","../SpatialReference"],function(y,c,h){function n(a,b,e,l,d){if("point"===a.type)b=b(a.x,a.y,q,0,l),d.x=b[0],d.y=b[1];else if("extent"===a.type)f=b(a.xmin,a.ymin,q,0,l),d.xmin=f[0],d.ymin=f[1],b=b(a.xmax,a.ymax,q,0,l),d.xmax=b[0],d.ymax=b[1];else if("polyline"===a.type||"polygon"===a.type){var c=(f="polyline"===a.type)?a.paths:a.rings,h=[],m=void 0;for(a=0;a<c.length;a++){var k=c[a],m=[];h.push(m);for(var g=0;g<k.length;g++)m.push(b(k[g][0],k[g][1],[0,0],0,l)),2<k[g].length&&
m[g].push(k[g][2]),3<k[g].length&&m[g].push(k[g][3])}f?d.paths=h:d.rings=h}else if("multipoint"===a.type){f=a.points;c=[];for(a=0;a<f.length;a++)c[a]=b(f[a][0],f[a][1],[0,0],0,l),2<f[a].length&&c[a].push(f[a][2]),3<f[a].length&&c[a].push(f[a][3]);d.points=c}return d.spatialReference=e,d;var f}function u(a,b){a=a&&(null!=a.wkid||null!=a.wkt?a:a.spatialReference);b=b&&(null!=b.wkid||null!=b.wkt?b:b.spatialReference);return a&&b?b.equals(a)?!0:b.isWebMercator&&a.isWGS84||a.isWebMercator&&b.isWGS84:!1}
function r(a,b,e,c){void 0===e&&(e=[0,0]);void 0===c&&(c=0);89.99999<b?b=89.99999:-89.99999>b&&(b=-89.99999);b*=v;return e[c]=a*v*p,e[c+1]=.5*p*Math.log((1+Math.sin(b))/(1-Math.sin(b))),e}function t(a,b,e,c,d){void 0===e&&(e=[0,0]);void 0===c&&(c=0);void 0===d&&(d=!1);a=a/p*w;return e[c]=d?a:a-360*Math.floor((a+180)/360),e[c+1]=(x/2-2*Math.atan(Math.exp(-1*b/p)))*w,e}Object.defineProperty(c,"__esModule",{value:!0});var p=6378137,x=3.141592653589793,w=57.29577951308232,v=.017453292519943,q=[0,0];c.canProject=
u;c.project=function(a,b){var c=a&&a.spatialReference;b=b&&(null!=b.wkid||null!=b.wkt?b:b.spatialReference);return u(c,b)?c.equals(b)?a.clone():b.isWebMercator?n(a,r,h.WebMercator,!1,a.clone()):b.isWGS84?n(a,t,h.WGS84,!1,a.clone()):null:null};c.lngLatToXY=r;c.xyToLngLat=t;c.geographicToWebMercator=function(a,b,c){return void 0===b&&(b=!1),void 0===c&&(c=a.clone()),n(a,r,h.WebMercator,b,c)};c.webMercatorToGeographic=function(a,b,c){return void 0===b&&(b=!1),void 0===c&&(c=a.clone()),n(a,t,h.WGS84,
b,c)}});