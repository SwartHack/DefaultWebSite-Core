//>>built
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../request ../core/accessorSupport/decorators ../core/promiseUtils ../core/Error ./Layer".split(" "),function(q,r,n,l,m,c,f,g,p){return function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return n(a,d),a.prototype.getImageUrl=function(t,a,c,b){throw new g("dynamiclayer:getImageUrl-not-implemented","getImageUrl() is not implemented");},a.prototype.fetchImage=function(a,c,d,b){a=this.getImageUrl(a,
c,d,b);var h={responseType:"image",allowImageDataAccess:b&&b.allowImageDataAccess||!1};b&&b.timestamp&&(h.query={_ts:b.timestamp});var e,k;return"string"==typeof a?(e=a,k=m(a,h)):k=a.then(function(a){return e=a,m(e,h)}),k.then(function(a){return a.data}).otherwise(function(a){return a&&"cancel"===a.dojoType?f.reject(a):e?f.reject(new g("dynamiclayer:image-fetch-error","Unable to load image: "+e,{error:a})):f.reject(new g("dynamiclayer:getImageUrl-error","Unable to create image url",{error:a}))})},
l([c.shared({"2d":"../views/2d/layers/MapImageLayerView2D","3d":"../views/3d/layers/MapImageLayerView3D"})],a.prototype,"viewModulePaths",void 0),a=l([c.subclass("esri.layers.DynamicLayer")],a)}(c.declared(p))});