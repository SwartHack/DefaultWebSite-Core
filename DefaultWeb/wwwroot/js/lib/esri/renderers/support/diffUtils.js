//>>built
define("require exports dojo/_base/lang ../../core/Accessor ../../core/Collection ../../core/accessorSupport/utils".split(" "),function(z,h,g,v,r,w){function t(a){return a instanceof r?Object.keys(a.items):a instanceof v?w.getProperties(a).keys():a?Object.keys(a):[]}function n(a,b){return a instanceof r?a.items[b]:a[b]}function x(a,b){return Array.isArray(a)&&Array.isArray(b)?a.length!==b.length:!1}function u(a,b){var f=a.diff;if(f&&g.isFunction(f))return f(a,b);var k=t(a),l=t(b);if(0!==k.length||
0!==l.length){if(!k.length||!l.length||x(a,b))return{type:"complete",oldValue:a,newValue:b};var m=l.filter(function(a){return-1===k.indexOf(a)}),c=k.filter(function(a){return-1===l.indexOf(a)}),m=k.filter(function(c){return-1<l.indexOf(c)&&n(a,c)!==n(b,c)}).concat(m,c).sort();if((c=a?a.declaredClass:null)&&-1<y.indexOf(c)&&m.length)return{type:"complete",oldValue:a,newValue:b};var p,h;for(h in m){var c=m[h],d=n(a,c),e=n(b,c),q=void 0;g.isFunction(d)||g.isFunction(e)||d!==e&&(null!=d||null!=e)&&(q=
f&&f[c]&&g.isFunction(f[c])?f[c](d,e):"object"==typeof d&&"object"==typeof e&&(d?d.declaredClass:null)===(e?e.declaredClass:null)?u(d,e):{type:"complete",oldValue:d,newValue:e},q&&(p=p||{type:"partial",diff:{}},p.diff[c]=q))}return p}}Object.defineProperty(h,"__esModule",{value:!0});var y=["esri.Color","esri.portal.Portal"];h.diff=function(a,b){return g.isFunction(a)||g.isFunction(b)||!a&&!b?void 0:!a||!b||"object"==typeof a&&"object"==typeof a&&(a?a.declaredClass:null)!==(b?b.declaredClass:null)?
{type:"complete",oldValue:a,newValue:b}:u(a,b)}});