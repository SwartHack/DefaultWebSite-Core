//>>built
define("require exports dojo/_base/lang dojox/gfx/_base ../../Color ../../core/screenUtils ../../request ../../core/promiseUtils ../../core/LRUMap".split(" "),function(r,d,k,l,t,e,u,v,w){function m(a){if(!a)return null;var b,c=a.constructor,f=e.pt2px(a.width);switch(a.type){case n:case p:case q:b=m(a.outline);break;case x:a.style!==c.STYLE_NULL&&0!==f&&(b={color:a.color,style:y(a.style),width:f,cap:a.cap,join:a.join===c.JOIN_MITER?e.pt2px(a.miterLimit):a.join});break;default:b=null}return b}Object.defineProperty(d,
"__esModule",{value:!0});var p="picture-fill",n="simple-fill",x="simple-line",q="simple-marker",z=r.toUrl("../../symbols/patterns/"),A={left:"start",center:"middle",right:"end",justify:"start"},B={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},h=new w(1E3);d.getSVGAlign=function(a){return a=(a=a.horizontalAlignment)&&A[a.toLowerCase()]||"middle"};d.getSVGBaseline=function(a){return(a=a.verticalAlignment)&&B[a.toLowerCase()]||"alphabetic"};d.getSVGBaselineShift=
function(a){return"bottom"===a.verticalAlignment?"super":null};d.getFill=function(a){var b=a.style,c=null;if(a){var f=a.constructor;switch(a.type){case q:b!==f.STYLE_CROSS&&b!==f.STYLE_X&&(c=a.color);break;case n:b===f.STYLE_SOLID?c=a.color:b!==f.STYLE_NULL&&(c=k.mixin({},l.defaultPattern,{src:z+b+".png",width:8,height:8}));break;case p:c=k.mixin({},l.defaultPattern,{src:a.url,width:e.pt2px(a.width)*a.xscale,height:e.pt2px(a.height)*a.yscale,x:e.pt2px(a.xoffset),y:e.pt2px(a.yoffset)});break;case "text":c=
a.color}}return c};d.getPatternUrlWithColor=function(a,b){var c=a+"-"+b;return h.has(c)?v.resolve(h.get(c)):u(a,{responseType:"image",allowImageDataAccess:!0}).then(function(a){a=a.data;var d=a.naturalWidth,f=a.naturalHeight,e=document.createElement("canvas");e.width=d;e.height=f;var g=e.getContext("2d");g.fillStyle=b;g.fillRect(0,0,d,f);g.globalCompositeOperation="destination-in";g.drawImage(a,0,0);a=e.toDataURL();return h.set(c,a),a})};d.getStroke=m;var y=function(){var a={};return function(b){if(a[b])return a[b];
var c=b.replace(/-/g,"");return a[b]=c,c}}();d.defaultThematicColor=new t([128,128,128])});