//>>built
define("require exports ../../../core/tsSupport/extendsHelper ../../../core/ObjectPool ./TerrainConst ./TileAgentBase ./UpsampleInfo".split(" "),function(l,m,e,h,f,k,g){return function(d){function a(){var b=null!==d&&d.apply(this,arguments)||this;return b._scaleRangeEnabled=!1,b}return e(a,d),a.prototype.dataArrived=function(b){b!==this.tile?this._setUpsamplingTile(b):(this._unsetUpsamplingTile(),this.updateGeometry());this._dataRequested=null;this._requestNext()},a.prototype.updateGeometry=function(){this._tileLayerInfo.pendingUpdates|=
f.TileUpdateTypes.UPDATE_GEOMETRY;this.tile.updateGeometry()},a.prototype._findAncestorWithData=function(){for(var b,a=this.layerClass,d=this.layerIdx,c=this.tile,e=c.vlevel;c&&!(c.layerInfo[a][d].data&&(b=c,e-c.lij[0]>=f.ELEVATION_DESIRED_RESOLUTION_LEVEL));)c=c.parent;return b?(a=g.Pool.acquire(),a.init(b,0,0,1),a):null},a.prototype._desiredMinLevelDelta=function(){return f.ELEVATION_DESIRED_RESOLUTION_LEVEL-(this.tile.vlevel-this.tile.lij[0])},a.prototype._setUpsamplingTile=function(a){this._unsetUpsamplingTile();
var b=g.Pool.acquire();b.init(a,0,0,1);this._tileLayerInfo.upsampleFromTile=b;this.updateGeometry()},a.Pool=new h(a),a}(k)});