//>>built
define(["require","exports","../../../webgl/Texture","../../../webgl/enums"],function(u,g,p,v){function f(c){return c.charCodeAt(0)+(c.charCodeAt(1)<<8)+(c.charCodeAt(2)<<16)+(c.charCodeAt(3)<<24)}Object.defineProperty(g,"__esModule",{value:!0});var q=f("DXT1"),r=f("DXT3"),t=f("DXT5");g.createDDSTexture=function(c,d,f,e){var a=new Int32Array(f,0,31);if(542327876!==a[0])return console.error("Invalid magic number in DDS header"),null;if(!(a[20]&4))return console.error("Unsupported format, must contain a FourCC code"),
null;var b,l;b=a[21];switch(b){case q:b=8;l=33776;break;case r:b=16;l=33778;break;case t:b=16;l=33779;break;default:return console.error("Unsupported FourCC code:",String.fromCharCode(255&b,b>>8&255,b>>16&255,b>>24&255)),null}var h=1;a[2]&131072&&!1!==e&&(h=Math.max(1,a[7]));var g,m;e=a[4];var k=a[3],n=a[1]+4;d.samplingMode=1<h?9987:9729;d.hasMipmap=1<h;d.width=a[4];d.height=a[3];d=new p(c,d);c.bindTexture(d);for(a=0;h>a&&(m=Math.floor((e+3)/4)*Math.floor((k+3)/4)*b,g=new Uint8Array(f,n,m)),c.gl.compressedTexImage2D(c.gl.TEXTURE_2D,
a,l,e,k,0,g),n+=m,(1!==e||1!==k)&&1!==h;++a)e=Math.max(1,e>>1),k=Math.max(1,k>>1);return d}});