//>>built
require({cache:{"esri/views/vectorTiles/WorkerTile":function(){define("require exports dojo/Deferred ../../core/promiseUtils ../../core/executeAsync ../../core/ObjectPool ./VertexMemoryBuffer ./IndexMemoryBuffer ./TileParser ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ./Placement ./GeometryUtils".split(" "),function(F,a,l,C,u,y,q,c,b,p,d,k,g,n,h){return function(){function a(){this.status=this.rotation=0;this._symbolBuckets=[];this.placementEngine=new n.PlacementEngine;this.fillVertexBuffer=
new q.FillVertexBuffer(!1);this.fillDDVertexBuffer=new q.FillVertexBuffer(!0);this.fillIndexBuffer=new c.TriangleIndexBuffer;this.outlineVertexBuffer=new q.OutlineVertexBuffer(!1);this.outlineDDVertexBuffer=new q.OutlineVertexBuffer(!0);this.outlineIndexBuffer=new c.TriangleIndexBuffer;this.lineVertexBuffer=new q.LineVertexBuffer(!1);this.lineDDVertexBuffer=new q.LineVertexBuffer(!0);this.lineIndexBuffer=new c.TriangleIndexBuffer;this.iconVertexBuffer=new q.SymbolVertexBuffer(!1);this.iconDDVertexBuffer=
new q.SymbolVertexBuffer(!0);this.iconIndexBuffer=new c.TriangleIndexBuffer;this.textVertexBuffer=new q.SymbolVertexBuffer(!1);this.textDDVertexBuffer=new q.SymbolVertexBuffer(!0);this.textIndexBuffer=new c.TriangleIndexBuffer}return a.prototype.initialize=function(a,c,d,m){void 0===m&&(m=0);this.tileKey=a;this.refKey=c;this._workerTileHandler=d;this.rotation=m;this.placementEngine.setAngle(h.C_DEG_TO_RAD*m)},a.prototype.release=function(){this.tileKey=this.refKey="";this.rotation=this.status=0;this.fillVertexBuffer.reset();
this.fillDDVertexBuffer.reset();this.fillIndexBuffer.reset();this.outlineVertexBuffer.reset();this.outlineDDVertexBuffer.reset();this.outlineIndexBuffer.reset();this.lineVertexBuffer.reset();this.lineDDVertexBuffer.reset();this.lineIndexBuffer.reset();this.iconVertexBuffer.reset();this.iconDDVertexBuffer.reset();this.iconIndexBuffer.reset();this.textVertexBuffer.reset();this.textDDVertexBuffer.reset();this.textIndexBuffer.reset();this.placementEngine.reset();this._symbolBuckets.length=0;this._workerTileHandler=
null},a.prototype.setDataAndParse=function(a,c){var m=this,b=new l(function(a){m.status=6});return this._parse(a,c).then(function(a){m.status=4;for(var c=new Uint32Array([1,m.fillVertexBuffer.sizeInBytes,2,m.fillDDVertexBuffer.sizeInBytes,3,m.fillIndexBuffer.sizeInBytes,4,m.outlineVertexBuffer.sizeInBytes,5,m.outlineDDVertexBuffer.sizeInBytes,6,m.outlineIndexBuffer.sizeInBytes,7,m.lineVertexBuffer.sizeInBytes,8,m.lineDDVertexBuffer.sizeInBytes,9,m.lineIndexBuffer.sizeInBytes,10,m.iconVertexBuffer.sizeInBytes,
11,m.iconDDVertexBuffer.sizeInBytes,12,m.iconIndexBuffer.sizeInBytes,13,m.textVertexBuffer.sizeInBytes,14,m.textDDVertexBuffer.sizeInBytes,15,m.textIndexBuffer.sizeInBytes]),h=[],n=a.length,G=0;n>G;G++){var r=a[G];if(r instanceof d)h.push(r.layerIndex),h.push(1),h.push(r.fillIndexStart),h.push(r.fillIndexCount),h.push(r.outlineIndexStart),h.push(r.outlineIndexCount);else if(r instanceof k)h.push(r.layerIndex),h.push(2),h.push(r.lineIndexStart),h.push(r.lineIndexCount),h.push(r.connectorStart),h.push(r.connectorCount);
else if(r instanceof g){h.push(r.layerIndex);h.push(3);h.push(r.sdfMarker?1:0);var I=r.markerPageMap;h.push(I.size);I.forEach(function(a,c){h.push(c);h.push(a[0]);h.push(a[1])});r=r.glyphsPageMap;h.push(r.size);r.forEach(function(a,c){h.push(c);h.push(a[0]);h.push(a[1])})}else r instanceof p&&(h.push(r.layerIndex),h.push(0))}a=new Uint32Array(h);var n=m.fillVertexBuffer.toBuffer(),G=m.fillDDVertexBuffer.toBuffer(),r=m.fillIndexBuffer.toBuffer(),I=m.outlineVertexBuffer.toBuffer(),x=m.outlineDDVertexBuffer.toBuffer(),
l=m.outlineIndexBuffer.toBuffer(),H=m.lineVertexBuffer.toBuffer(),q=m.lineDDVertexBuffer.toBuffer(),v=m.lineIndexBuffer.toBuffer(),E=m.iconVertexBuffer.toBuffer(),A=m.iconDDVertexBuffer.toBuffer(),J=m.iconIndexBuffer.toBuffer(),L=m.textVertexBuffer.toBuffer(),u=m.textDDVertexBuffer.toBuffer(),M=m.textIndexBuffer.toBuffer();b.resolve({data:{bufferDataInfo:c.buffer,bucketDataInfo:a.buffer,bufferData:[n,G,r,I,x,l,H,q,v,E,A,J,L,u,M]},buffers:[n,G,r,I,x,l,H,q,v,E,A,J,L,u,M,c.buffer,a.buffer]})}),b.promise},
a.prototype.addBucket=function(a){this._symbolBuckets.push(a)},a.prototype.updateSymbols=function(a){var c=this,d=this._symbolBuckets;if(!d||0===d.length)return C.resolve({data:null,buffers:null});this.rotation=a;var m=this.placementEngine;m.reset();m.setAngle(a/256*360*h.C_DEG_TO_RAD);var b=this.iconVertexBuffer;b.reset();var k=this.iconDDVertexBuffer;k.reset();var n=this.iconIndexBuffer;n.reset();var g=this.textVertexBuffer;g.reset();var p=this.textDDVertexBuffer;p.reset();var G=this.textIndexBuffer;
G.reset();var l=[],q=d.length,N=0;return u(function(){if(6===c.status||0===c.status)return!0;if(q>N){var a=d[N++],h=a.layer;(a=a.copy(h.hasDataDrivenIcon?k:b,n,h.hasDataDrivenText?p:g,G,m))&&(l.push(a),a.updateSymbols())}return N>=q},5).then(function(){if(6===c.status||0===c.status||0===b.sizeInBytes&&0===k.sizeInBytes&&0===n.sizeInBytes&&0===g.sizeInBytes&&0===p.sizeInBytes&&0===G.sizeInBytes)return{data:null,buffers:null};var a=new Uint32Array([10,b.sizeInBytes,11,k.sizeInBytes,12,n.sizeInBytes,
13,g.sizeInBytes,14,p.sizeInBytes,15,G.sizeInBytes]),d=[];q=l.length;for(var m=0;q>m;m++){var h=l[m];d.push(h.layerIndex);d.push(3);d.push(h.sdfMarker?1:0);var A=h.markerPageMap;d.push(A.size);A.forEach(function(a,c){d.push(c);d.push(a[0]);d.push(a[1])});h=h.glyphsPageMap;d.push(h.size);h.forEach(function(a,c){d.push(c);d.push(a[0]);d.push(a[1])})}var m=new Uint32Array(d),h=b.toBuffer(),A=k.toBuffer(),w=n.toBuffer(),r=g.toBuffer(),z=p.toBuffer(),I=G.toBuffer();return{data:{bufferDataInfo:a.buffer,
bucketDataInfo:m.buffer,bufferData:[h,A,w,r,z,I]},buffers:[h,A,w,r,z,I,a.buffer,m.buffer]}}).otherwise(function(a){return C.resolve({data:null,buffers:null})})},a.prototype.setObsolete=function(){this.status=6},a.prototype.getLayers=function(){return this._workerTileHandler.getLayers()},a.prototype.getWorkerTileHandler=function(){return this._workerTileHandler},a.prototype._parse=function(a,c){if(!a||0===a.byteLength)return C.resolve([]);this.status=2;return(new b(a,this,c)).parse()},a.pool=new y(a),
a}()})},"esri/core/executeAsync":function(){define(["require","exports","dojo/Deferred","./now"],function(F,a,l,C){return function(a,y){var q;(!y||0>=y)&&(y=500);var c=new l(function(){q&&clearTimeout(q)}),b=function(){if(!c.isFulfilled()){for(var p=C(),d=!1;!d&&C()-p<y;)d=!0===a();d?c.resolve():q=setTimeout(b,0)}};return q=setTimeout(b,0),c.promise}})},"esri/views/vectorTiles/VertexMemoryBuffer":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./MemoryBuffer ./GeometryUtils".split(" "),
function(F,a,l,C,u,y){Object.defineProperty(a,"__esModule",{value:!0});var q=new Float32Array(1),c=new Uint32Array(q.buffer);F=function(a){function b(c){var d=a.call(this,c?20:12)||this;return d._isDataDriven=c,d}return l(b,a),b.prototype.isDataDriven=function(){return this._isDataDriven},b.prototype.add=function(a,b,g,n,h,m,p,I){var d=this.array;a=u.i1616to32(a,b);d.push(a);if(a=u.i8888to32(Math.round(31*g),Math.round(31*n),Math.round(31*h),Math.round(31*m)),d.push(a),a=u.i1616to32(p,0),d.push(a),
this._isDataDriven){if(!I)throw Error("Expecting data driven values.");g=I.color;n=g[3]*I.opacity*255;d.push(u.i8888to32(g[0]*n,g[1]*n,g[2]*n,n));q[0]=I.size;d.push(c[0])}},b}(u);a.LineVertexBuffer=F;F=function(a){function c(c){var d=a.call(this,c?8:4)||this;return d._isDataDriven=c,d}return l(c,a),c.prototype.isDataDriven=function(){return this._isDataDriven},c.prototype.add=function(a,c,b){var d=this.array;if(d.push(u.i1616to32(a,c)),this._isDataDriven){if(!b)throw Error("Expecting data driven values.");
a=b.color;b=a[3]*b.opacity*255;d.push(u.i8888to32(a[0]*b,a[1]*b,a[2]*b,b))}},c}(u);a.FillVertexBuffer=F;F=function(a){function c(c){var d=a.call(this,c?12:8)||this;return d._isDataDriven=c,d}return l(c,a),c.prototype.isDataDriven=function(){return this._isDataDriven},c.prototype.add=function(a,c,b,n,h,m,p){var d=this.array,k=this.index;a=u.i1616to32(a,c);d.push(a);if(a=u.i8888to32(Math.round(15*b),Math.round(15*n),h,m),d.push(a),this._isDataDriven){if(!p)throw Error("Expecting data driven values.");
b=p.color;p=b[3]*p.opacity*255;d.push(u.i8888to32(b[0]*p,b[1]*p,b[2]*p,p))}return k},c}(u);a.OutlineVertexBuffer=F;F=function(a){function b(c){var d=a.call(this,c?24:16)||this;return d._isDataDriven=c,d}return l(b,a),b.prototype.isDataDriven=function(){return this._isDataDriven},b.prototype.add=function(a,b,g,n,h,m,p,l,x,r,H){var d=this.array;a=u.i1616to32(a,b);if(d.push(a),a=u.i1616to32(Math.round(32*g),Math.round(32*n)),d.push(a),a=u.i8888to32(h/4,m/4,0,0),d.push(a),a=u.i8888to32(Math.ceil(10*r),
y.radToByte(p),10*l,Math.min(10*x,255)),d.push(a),this._isDataDriven){if(!H)throw Error("Expecting data driven values.");g=H.color;n=g[3]*H.opacity*255;d.push(u.i8888to32(g[0]*n,g[1]*n,g[2]*n,n));q[0]=H.size;d.push(c[0])}},b}(u);a.SymbolVertexBuffer=F})},"esri/views/vectorTiles/IndexMemoryBuffer":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./MemoryBuffer"],function(F,a,l,C,u){Object.defineProperty(a,"__esModule",{value:!0});F=
function(a){function q(){return a.call(this,12)||this}return l(q,a),q.prototype.add=function(a,b,p){var c=this.array;c.push(a);c.push(b);c.push(p)},q}(u);a.TriangleIndexBuffer=F;u=function(a){function q(){return a.call(this,4)||this}return l(q,a),q.prototype.add=function(a){this.array.push(a)},q}(u);a.PointElementMemoryBuffer=u})},"esri/views/vectorTiles/TileParser":function(){define("require exports dojo/promise/all ../../core/promiseUtils ../../core/executeAsync ../../core/pbf ./SourceLayerData ./Feature ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ../2d/engine/webgl/TileClipper".split(" "),
function(F,a,l,C,u,y,q,c,b,p,d,k,g){return function(){function a(a,c,d){this._pbfTile=new y(new Uint8Array(a),new DataView(a));this._tile=c;this._connection=d;this._layers=c.getLayers();d=c.tileKey.split("/").map(parseFloat);var m=d[0];a=d[1];d=d[2];this._level=m;c.refKey&&(c=c.refKey.split("/").map(parseFloat)[0],c=m-c,0<c&&(m=(1<<c)-1,this._tileClipper=new g.TileClipper(c,a&m,d&m)));this._tileClipper||(this._tileClipper=new g.SimpleBuilder)}return a.prototype.parse=function(){for(var a,d=this,b=
this._parseTileData(this._pbfTile),k=this._layers,n=k.length,g=this._level,p=[],w={},z=new Set,n=n-1;0<=n;n--)if(a=k[n],!(a.minzoom&&g<a.minzoom||a.maxzoom&&g>=a.maxzoom||a.layout&&"none"===a.layout.visibility))if(0!==a.type){var q=a.sourceLayer,D=b[q];if(D){z.add(q);var U=this._createBucket(a);U&&(U.layerIndex=n,U.layerExtent=D.extent,(D=w[q])||(D=w[q]=[]),D.push(U))}}else U=this._createBucket(a),U.layerIndex=n,p.push(U);var R=10*this._level,Q=10*(this._level+1),N=[],K=[],y=[],v=[],E=this._tileClipper,
A=new Set,J={},L=[];z.forEach(function(a){return L.push(a)});var S=0,M=0,V=L.length;return u(function(){if(6===d._tile.status)return!0;switch(S){case 0:if(V>M){var a=L[M++],m=b[a],h=w[a];if(h&&0!==h.length)for(a=m.getData();a.next(2);){var k=new c(a.getMessage(),m),n=k.values;if(n){var g=n._minzoom;if(g&&g>=Q)continue;if((n=n._maxzoom)&&R>=n)continue}for(var g=0,p=h;g<p.length;g++)n=p[g],n.pushFeature(k)}}else{m=d._tile;for(a in w)for(h=w[a],k=0;k<h.length;k++)n=h[k],n.hasFeatures()&&(3===n.layer.type?
(N.push(n),m.addBucket(n)):n.layer.refLayerId?y.push(n):(K.push(n),v[n.layer.id]=n));S=1;M=0;V=N.length}break;case 1:V>M?N[M++].getResources(E,A,J):S=2}return 2===S},50).then(function(){if(6===d._tile.status)return[];var a,c=[],m=d._tile.getWorkerTileHandler();0<A.size&&(a=m.fetchSprites(A,d._connection),c.push(a));var b,h;for(h in J)a=J[h],0<a.size&&(b=m.fetchGlyphs(d._tile.tileKey,h,a,d._connection),c.push(b));return l(c).then(function(a){if(6===d._tile.status)return[];var c=0,m=0,b=K.length;return u(function(){if(6===
d._tile.status)return!0;switch(c){case 0:if(b>m){var a=K[m++];a.processFeatures(E,d._tile);p.push(a)}else c=1,m=0,b=y.length;break;case 1:for(var h=0;h<y.length;h++){var a=y[h],k=v[a.layer.refLayerId];k&&(k.assignBufferInfo(a),p.push(a))}c=2;m=0;b=N.length;break;case 2:b>m?(a=N[m++],a.processFeatures(E,d._tile),p.push(a)):c=3}return 3===c},50).then(function(){return p.sort(function(a,c){return a.layerIndex-c.layerIndex}),p})}).otherwise(function(a){return C.reject(Error(a))})}).otherwise(function(a){return C.reject(Error(a))})},
a.prototype._parseTileData=function(a){for(var c={};a.next();)switch(a.tag()){case 3:var d=new q(a.getMessage());c[d.name]=d;break;default:a.skip()}return c},a.prototype._createBucket=function(a){switch(a.type){case 0:return this._createBackgroundBucket(a);case 1:return this._createFillBucket(a);case 2:return this._createLineBucket(a);case 3:return this._createSymbolBucket(a)}},a.prototype._createBackgroundBucket=function(a){return new b(a,this._level)},a.prototype._createFillBucket=function(a){var c=
this._tile;return new p(a,this._level,a.hasDataDrivenFill?c.fillDDVertexBuffer:c.fillVertexBuffer,c.fillIndexBuffer,a.hasDataDrivenOutline?c.outlineDDVertexBuffer:c.outlineVertexBuffer,c.outlineIndexBuffer)},a.prototype._createLineBucket=function(a){var c=this._tile;return new d(a,this._level,a.hasDataDrivenLine?c.lineDDVertexBuffer:c.lineVertexBuffer,c.lineIndexBuffer)},a.prototype._createSymbolBucket=function(a){var c=this._tile;return new k(a,this._level,a.hasDataDrivenIcon?c.iconDDVertexBuffer:
c.iconVertexBuffer,c.iconIndexBuffer,a.hasDataDrivenText?c.textDDVertexBuffer:c.textVertexBuffer,c.textIndexBuffer,c.placementEngine,c.getWorkerTileHandler())},a}()})},"esri/views/vectorTiles/SourceLayerData":function(){define(["require","exports"],function(F,a){return function(){function a(l){this.extent=4096;this.keys=[];this.values=[];for(this._pbfLayer=l.clone();l.next();)switch(l.tag()){case 1:this.name=l.getString();break;case 3:this.keys.push(l.getString());break;case 4:this.values.push(a._parseValue(l.getMessage()));
break;case 5:this.extent=l.getUInt32();break;default:l.skip()}}return a.prototype.getData=function(){return this._pbfLayer},a._parseValue=function(a){for(;a.next();)switch(a.tag()){case 1:return a.getString();case 2:return a.getFloat();case 3:return a.getDouble();case 4:return a.getInt64();case 5:return a.getUInt64();case 6:return a.getSInt64();case 7:return a.getBool();default:a.skip()}return null},a}()})},"esri/views/vectorTiles/Feature":function(){define(["require","exports","../2d/engine/webgl/Geometry"],
function(F,a,l){return function(){function a(a,l){this.values={};var q=l.keys;for(l=l.values;a.next();)switch(a.tag()){case 1:this.id=a.getUInt64();break;case 2:for(var c=a.getMessage(),b=this.values;!c.empty();){var p=c.getUInt32(),d=c.getUInt32();b[q[p]]=l[d]}break;case 3:this.type=a.getUInt32();break;case 4:this._pbfGeometry=a.getMessage();break;default:a.skip()}}return a.prototype.getGeometry=function(a){if(void 0!==this._geometry)return this._geometry;var u,q,c=this._pbfGeometry;a?a.reset(this.type):
u=[];for(var b=1,p=0,d=0,k=0;!c.empty();)switch(0===p&&(p=c.getUInt32(),b=7&p,p>>=3),p--,b){case 1:d+=c.getSInt32();k+=c.getSInt32();a?a.moveTo(d,k):(q&&u.push(q),q=[],q.push(new l.Point(d,k)));break;case 2:d+=c.getSInt32();k+=c.getSInt32();a?a.lineTo(d,k):q.push(new l.Point(d,k));break;case 7:a?a.close():q&&!q[0].equals(d,k)&&q.push(q[0].clone());break;default:throw Error("Invalid path operation");}var g;return a?g=a.result():(q&&u.push(q),g=u),this._geometry=g,g},a}()})},"esri/views/vectorTiles/BackgroundBucket":function(){define(["require",
"exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./Bucket"],function(F,a,l,C,u){return function(a){function q(c,b){return a.call(this,c,b)||this}return l(q,a),q}(u)})},"esri/views/vectorTiles/Bucket":function(){define(["require","exports"],function(F,a){return function(){function a(a,l){this.layerExtent=4096;this._features=[];this.layer=a;this.zoom=l;this._filter=a.getFeatureFilter()}return a.prototype.pushFeature=function(a){this._filter.filter(a)&&this._features.push(a)},
a.prototype.hasFeatures=function(){return 0<this._features.length},a.prototype.processFeatures=function(a,l){},a.prototype.assignBufferInfo=function(a){},a}()})},"esri/views/vectorTiles/FillBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/ArrayPool ./Bucket ../2d/engine/webgl/Geometry ../../core/libs/earcut/earcut".split(" "),function(F,a,l,C,u,y,q,c){return function(a){function b(c,b,g,n,h,m){b=a.call(this,c,b)||this;if(c.hasDataDrivenFill!==
g.isDataDriven())throw Error("incompatible fill buffer");if(c.hasDataDrivenOutline!==h.isDataDriven())throw Error("incompatible outline buffer");return b._fillVertexBuffer=g,b._fillIndexBuffer=n,b._outlineVertexBuffer=h,b._outlineIndexBuffer=m,b}return l(b,a),Object.defineProperty(b.prototype,"fillIndexStart",{get:function(){return this._fillIndexStart},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"fillIndexCount",{get:function(){return this._fillIndexCount},enumerable:!0,configurable:!0}),
Object.defineProperty(b.prototype,"outlineIndexStart",{get:function(){return this._outlineIndexStart},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"outlineIndexCount",{get:function(){return this._outlineIndexCount},enumerable:!0,configurable:!0}),b.prototype.assignBufferInfo=function(a){a._fillIndexStart=this._fillIndexStart;a._fillIndexCount=this._fillIndexCount;a.layer.getPaintProperty("fill-outline-color")?(a._outlineIndexStart=this._outlineIndexStart,a._outlineIndexCount=
this._outlineIndexCount):(a._outlineIndexStart=0,a._outlineIndexCount=0)},b.prototype.processFeatures=function(a,c){this._fillIndexStart=this._fillIndexBuffer.index;this._fillIndexCount=0;this._outlineIndexStart=this._outlineIndexBuffer.index;this._outlineIndexCount=0;c=this.layer;var d=this.zoom,b=c.hasDataDrivenFill,h=c.hasDataDrivenOutline;a&&a.setExtent(this.layerExtent);for(var m=c.getPaintValue("fill-pattern",d),k=c.getPaintValue("fill-antialias",d)&&void 0===m,p=0,l=this._features;p<l.length;p++){var r=
l[p],q=void 0;b&&(q={color:m?[1,1,1,1]:c.getPaintValue("fill-color",d,r),opacity:c.getPaintValue("fill-opacity",d,r)});var w=void 0;h&&(w={color:m?[1,1,1,1]:c.getPaintValue("fill-outline-color",d,r),opacity:c.getPaintValue("fill-opacity",d,r)});r=r.getGeometry(a);this._processFeature(r,k,q,w)}},b.prototype._processFeature=function(a,c,g,n){if(a){var d=a.length;if(c)for(c=0;d>c;c++)this._processOutline(a[c],n);var m;for(c=0;d>c;c++)n=b._area(a[c]),128<n?(void 0!==m&&this._processFill(a,m,g),m=[c]):
-128>n&&void 0!==m&&m.push(c);void 0!==m&&this._processFill(a,m,g)}},b.prototype._processOutline=function(a,c){var d,b,h,m=this._outlineVertexBuffer,k=this._outlineIndexBuffer,p=k.index,l=new q.Point(0,0),r=new q.Point(0,0),H=new q.Point(0,0),w=-1,z=-1,B=-1,D=-1,u=-1,R=!1,Q=a.length;if(!(2>Q)){for(var N=a[0],K=a[Q-1];Q&&K.isEqual(N);)--Q,K=a[Q-1];if(!(2>Q-0)){for(N=0;Q>N;++N){0===N?(d=a[Q-1],b=a[0],h=a[1],l.assignSub(b,d),l.normalize(),l.rightPerpendicular()):(d=b,b=h,h=N!==Q-1?a[N+1]:a[0],l.assign(r));
K=this._isClipEdge(d,b);-1===D&&(R=K);r.assignSub(h,b);r.normalize();r.rightPerpendicular();var y=l.x*r.y-l.y*r.x;H.assignAdd(l,r);H.normalize();var v=-H.x*-l.x+-H.y*-l.y,v=Math.abs(0!==v?1/v:1);8<v&&(v=8);0<=y?(B=m.add(b.x,b.y,l.x,l.y,0,1,c),-1===D&&(D=B),0<=w&&0<=z&&0<=B&&!K&&k.add(w,z,B),z=m.add(b.x,b.y,v*-H.x,v*-H.y,0,-1,c),-1===u&&(u=z),0<=w&&0<=z&&0<=B&&!K&&k.add(w,z,B),w=z,z=B,B=m.add(b.x,b.y,H.x,H.y,0,1,c),0<=w&&0<=z&&0<=B&&!K&&k.add(w,z,B),z=m.add(b.x,b.y,r.x,r.y,0,1,c),0<=w&&0<=z&&0<=B&&
!K&&k.add(w,z,B)):(B=m.add(b.x,b.y,v*H.x,v*H.y,0,1,c),-1===D&&(D=B),0<=w&&0<=z&&0<=B&&!K&&k.add(w,z,B),z=m.add(b.x,b.y,-l.x,-l.y,0,-1,c),-1===u&&(u=z),0<=w&&0<=z&&0<=B&&!K&&k.add(w,z,B),w=z,z=B,B=m.add(b.x,b.y,-H.x,-H.y,0,-1,c),0<=w&&0<=z&&0<=B&&!K&&k.add(w,z,B),w=m.add(b.x,b.y,-r.x,-r.y,0,-1,c),0<=w&&0<=z&&0<=B&&!K&&k.add(w,z,B))}0<=w&&0<=z&&0<=D&&!R&&k.add(w,z,D);0<=w&&0<=D&&0<=u&&!R&&k.add(w,u,D);this._outlineIndexCount+=3*(k.index-p)}}},b.prototype._processFill=function(a,b,g){var d;1<b.length&&
(d=[]);for(var h=0,m=0;m<b.length;m++){var k=b[m];0!==h&&d.push(h);h+=a[k].length}for(var m=2*h,h=u.acquire(),p=0;p<b.length;p++)for(var k=b[p],k=a[k],l=k.length,r=0;l>r;++r)h.push(k[r].x),h.push(k[r].y);a=c(h,d,2);b=a.length;if(0<b){d=this._fillVertexBuffer.index;for(p=0;m>p;)this._fillVertexBuffer.add(h[p++],h[p++],g);for(g=0;b>g;)this._fillIndexBuffer.add(d+a[g++],d+a[g++],d+a[g++]);this._fillIndexCount+=b}u.release(h)},b.prototype._isClipEdge=function(a,c){return a.x===c.x?-64>=a.x||4160<=a.x:
a.y===c.y?-64>=a.y||4160<=a.y:!1},b._area=function(a){for(var c=0,b=a.length-1,d=0;b>d;d++)c+=(a[d].x-a[d+1].x)*(a[d].y+a[d+1].y);return c+=(a[b].x-a[0].x)*(a[b].y+a[0].y),.5*c},b}(y)})},"esri/core/libs/earcut/earcut":function(){define([],function(){function F(c,d,m){m=m||2;r=c.length/m+(d?2*d.length:0);H=!1;var k=d&&d.length,n=k?d[0]*m:c.length,w=a(c,0,n,m,!0),p=[];if(!w)return p;var g,z,G,v;if(k)a:{var E=m,A,J,L;v=[];k=0;for(A=d.length;A>k;k++)J=d[k]*E,L=A-1>k?d[k+1]*E:c.length,J=a(c,J,L,E,!1),
J===J.next&&(J.steiner=!0),v.push(b(J));v.sort(y);for(k=0;k<v.length;k++){if(!w){w=null;break a}d=v[k];E=w;if(E=q(d,E))d=h(E,d),l(d,d.next);w=l(w,w.next)}}if(H)return p;if(c.length>80*m){g=G=c[0];z=k=c[1];for(E=m;n>E;E+=m)v=c[E],d=c[E+1],g>v&&(g=v),z>d&&(z=d),v>G&&(G=v),d>k&&(k=d);G=Math.max(G-g,k-z)}return C(w,p,m,g,z,G),p}function a(a,c,b,d,h){var n;if(h===0<x(a,c,b,d))for(h=c;b>h;h+=d)n=m(h,a[h],a[h+1],n);else for(h=b-d;h>=c;h-=d)n=m(h,a[h],a[h+1],n);return n&&k(n,n.next)&&(G(n),n=n.next),n}function l(a,
c){if(!a)return a;c||(c=a);var b=a,m=0,h=r*r/2;do{if(a=!1,b.steiner||!k(b,b.next)&&0!==d(b.prev,b,b.next))b=b.next;else{if(G(b),b=c=b.prev,b===b.next)return null;a=!0}if(m++>h)return H=!0,null}while(a||b!==c);return c}function C(a,b,m,r,q,I,x){if(a){if(!x&&I){var w=a,z=w;do null===z.z&&(z.z=c(z.x,z.y,r,q,I)),z.prevZ=z.prev,z=z.nextZ=z.next;while(z!==w);z.prevZ.nextZ=null;z.prevZ=null;var w=z,D,v,E,A,J,L,B=1;do{z=w;A=w=null;for(J=0;z;){J++;v=z;for(D=L=0;B>D&&(L++,v=v.nextZ,v);D++);for(D=B;0<L||0<D&&
v;)0===L?(E=v,v=v.nextZ,D--):0!==D&&v?z.z<=v.z?(E=z,z=z.nextZ,L--):(E=v,v=v.nextZ,D--):(E=z,z=z.nextZ,L--),A?A.nextZ=E:w=E,E.prevZ=A,A=E;z=v}A.nextZ=null;B*=2}while(1<J)}for(z=a;a.prev!==a.next;){E=a.prev;w=a.next;if(I)a:{v=a;D=r;var M=q,V=I;A=v.prev;J=v;L=v.next;if(0<=d(A,J,L))v=!1;else{var R=A.x>J.x?A.x>L.x?A.x:L.x:J.x>L.x?J.x:L.x,y=A.y>J.y?A.y>L.y?A.y:L.y:J.y>L.y?J.y:L.y,B=c(A.x<J.x?A.x<L.x?A.x:L.x:J.x<L.x?J.x:L.x,A.y<J.y?A.y<L.y?A.y:L.y:J.y<L.y?J.y:L.y,D,M,V);D=c(R,y,D,M,V);for(M=v.nextZ;M&&M.z<=
D;){if(M!==v.prev&&M!==v.next&&p(A.x,A.y,J.x,J.y,L.x,L.y,M.x,M.y)&&0<=d(M.prev,M,M.next)){v=!1;break a}M=M.nextZ}for(M=v.prevZ;M&&M.z>=B;){if(M!==v.prev&&M!==v.next&&p(A.x,A.y,J.x,J.y,L.x,L.y,M.x,M.y)&&0<=d(M.prev,M,M.next)){v=!1;break a}M=M.prevZ}v=!0}}else v=u(a);if(v)b.push(E.i/m),b.push(a.i/m),b.push(w.i/m),G(a),z=a=w.next;else{if(H)break;if(a=w,a===z){if(x)if(1===x){x=b;E=m;w=a;do z=w.prev,v=w.next.next,!k(z,v)&&g(z,w,w.next,v)&&n(z,v)&&n(v,z)&&(x.push(z.i/E),x.push(w.i/E),x.push(v.i/E),G(w),
G(w.next),w=a=v),w=w.next;while(w!==a);a=w;C(a,b,m,r,q,I,2)}else{if(2===x)a:{x=a;do{for(E=x.next.next;E!==x.prev;){if(w=x.i!==E.i){w=x;z=E;v=void 0;if(v=w.next.i!==z.i&&w.prev.i!==z.i){v=void 0;b:{v=w;do{if(v.i!==w.i&&v.next.i!==w.i&&v.i!==z.i&&v.next.i!==z.i&&g(v,v.next,w,z)){v=!0;break b}v=v.next}while(v!==w);v=!1}v=!v}A=void 0;if(A=v&&n(w,z)&&n(z,w)){v=w;A=!1;J=(w.x+z.x)/2;z=(w.y+z.y)/2;do v.y>z!=v.next.y>z&&J<(v.next.x-v.x)*(z-v.y)/(v.next.y-v.y)+v.x&&(A=!A),v=v.next;while(v!==w)}w=A}if(w){a=
h(x,E);x=l(x,x.next);a=l(a,a.next);C(x,b,m,r,q,I);C(a,b,m,r,q,I);break a}E=E.next}x=x.next}while(x!==a)}}else C(l(a),b,m,r,q,I,1);break}}}}}function u(a){var c=a.prev,b=a.next;if(0<=d(c,a,b))return!1;for(var m=a.next.next,h=0;m!==a.prev;){if(p(c.x,c.y,a.x,a.y,b.x,b.y,m.x,m.y)&&0<=d(m.prev,m,m.next))return!1;if(m=m.next,h++>r)return H=!0,!1}return!0}function y(a,c){return a.x-c.x}function q(a,c){var b,d=c,m=a.x,h=a.y,k=-(1/0);do{if(!d)return null;if(h<=d.y&&h>=d.next.y){var g=d.x+(h-d.y)*(d.next.x-
d.x)/(d.next.y-d.y);if(m>=g&&g>k){if(k=g,g===m){if(h===d.y)return d;if(h===d.next.y)return d.next}b=d.x<d.next.x?d:d.next}}d=d.next}while(d!==c);if(!b)return null;if(m===k)return b.prev;var w;c=b;for(var g=b.x,r=b.y,v=1/0,d=b.next;d!==c;)m>=d.x&&d.x>=g&&p(r>h?m:k,h,g,r,r>h?k:m,h,d.x,d.y)&&(w=Math.abs(h-d.y)/(m-d.x),(v>w||w===v&&d.x>b.x)&&n(d,a)&&(b=d,v=w)),d=d.next;return b}function c(a,c,b,d,m){return a=32767*(a-b)/m,c=32767*(c-d)/m,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=
1431655765&(a|a<<1),c=16711935&(c|c<<8),c=252645135&(c|c<<4),c=858993459&(c|c<<2),c=1431655765&(c|c<<1),a|c<<1}function b(a){var c=a,b=a;do c.x<b.x&&(b=c),c=c.next;while(c!==a);return b}function p(a,c,b,d,m,h,k,n){return 0<=(m-k)*(c-n)-(a-k)*(h-n)&&0<=(a-k)*(d-n)-(b-k)*(c-n)&&0<=(b-k)*(h-n)-(m-k)*(d-n)}function d(a,c,b){return(c.y-a.y)*(b.x-c.x)-(c.x-a.x)*(b.y-c.y)}function k(a,c){return a.x===c.x&&a.y===c.y}function g(a,c,b,m){return k(a,c)&&k(b,m)||k(a,m)&&k(b,c)?!0:0<d(a,c,b)!=0<d(a,c,m)&&0<d(b,
m,a)!=0<d(b,m,c)}function n(a,c){return 0>d(a.prev,a,a.next)?0<=d(a,c,a.next)&&0<=d(a,a.prev,c):0>d(a,c,a.prev)||0>d(a,a.next,c)}function h(a,c){var b=new I(a.i,a.x,a.y),d=new I(c.i,c.x,c.y),m=a.next,h=c.prev;return a.next=c,c.prev=a,b.next=m,m.prev=b,d.next=b,b.prev=d,h.next=d,d.prev=h,d}function m(a,c,b,d){a=new I(a,c,b);return d?(a.next=d.next,a.prev=d,d.next.prev=a,d.next=a):(a.prev=a,a.next=a),a}function G(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=
a.prevZ)}function I(a,c,b){this.i=a;this.x=c;this.y=b;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function x(a,c,b,d){for(var m=0,h=b-d;b>c;c+=d)m+=(a[h]-a[c])*(a[c+1]+a[h+1]),h=c;return m}var r,H;return F.deviation=function(a,c,b,d){var m=c&&c.length,h=Math.abs(x(a,0,m?c[0]*b:a.length,b));if(m)for(var m=0,k=c.length;k>m;m++)h-=Math.abs(x(a,c[m]*b,k-1>m?c[m+1]*b:a.length,b));for(m=c=0;m<d.length;m+=3){var k=d[m]*b,n=d[m+1]*b,g=d[m+2]*b;c+=Math.abs((a[k]-a[g])*(a[n+1]-a[k+
1])-(a[k]-a[n])*(a[g+1]-a[k+1]))}return 0===h&&0===c?0:Math.abs((c-h)/h)},F.flatten=function(a){for(var c=a[0][0].length,b={vertices:[],holes:[],dimensions:c},d=0,m=0;m<a.length;m++){for(var h=0;h<a[m].length;h++)for(var k=0;c>k;k++)b.vertices.push(a[m][h][k]);0<m&&(d+=a[m-1].length,b.holes.push(d))}return b},F})},"esri/views/vectorTiles/LineBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ../2d/engine/webgl/LineTess ./style/StyleLayer".split(" "),
function(F,a,l,C,u,y,q){var c=new y.Tessellator({distanceAlongCorrection:!0});return function(a){function b(c,b,g,n){b=a.call(this,c,b)||this;if(b.extrudeVectorsDoubleBuffer=[y.allocExtrudeVectors(),y.allocExtrudeVectors()],b.firstExtrudeVectors=y.allocExtrudeVectors(),b.recycledTriangleBridge=y.allocTriangles(20),b.recycledTrianglePie=y.allocTriangles(20),c.hasDataDrivenLine!==g.isDataDriven())throw Error("incompatible line buffer");return b._lineVertexBuffer=g,b._lineIndexBuffer=n,b}return l(b,
a),Object.defineProperty(b.prototype,"lineIndexStart",{get:function(){return this._lineIndexStart},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"lineIndexCount",{get:function(){return this._lineIndexCount},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"connectorStart",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"connectorCount",{get:function(){return 0},enumerable:!0,configurable:!0}),b.prototype.assignBufferInfo=
function(a){a._lineIndexStart=this._lineIndexStart;a._lineIndexCount=this._lineIndexCount},b.prototype.processFeatures=function(a,c){this._lineIndexStart=this._lineIndexBuffer.index;this._lineIndexCount=0;c=this.layer;var b=this.zoom,d=c.hasDataDrivenLine;a&&a.setExtent(this.layerExtent);for(var h=c.getPaintValue("line-pattern",b),m=0,k=this._features;m<k.length;m++){var p=k[m],l=new q.LineLayout(c,b,p),r=void 0;d&&(r={color:h?[1,1,1,1]:c.getPaintValue("line-color",b,p),opacity:c.getPaintValue("line-opacity",
b,p),size:Math.max(Math.min(c.getPaintValue("line-width",b,p),256),0)},0>=r.size||0>=r.opacity||0>=r.color[3])||(p=p.getGeometry(a),this._processFeature(l,p,r))}},b.prototype._processFeature=function(a,c,b){if(c)for(var d=c.length,h=0;d>h;h++)this._processGeometry(c[h],a,b)},b.prototype._processGeometry=function(a,c,b){if(!(2>a.length)){for(var d=a[0],h=a[a.length-1],m=h.x-d.x,h=h.y-d.y,d=1E-6>m*m+h*h,k=a[0],g=1;g<a.length;)m=a[g].x-k.x,h=a[g].y-k.y,1E-6>m*m+h*h?a.splice(g,1):(k=a[g],++g);if(!(2>
a.length)){this.vertices=a;this.verticesLen=a.length;this.isClosed=d;this.cap=c.cap;this.join=c.join;this.almostParallelRads=.05;this.veryShallowRads=.1;this.miterSafeRads=y.MITER_SAFE_RADS;this.miterLimitMag=Math.min(c.miterLimit,y.SYSTEM_MAG_LIMIT);this.roundLimitRads=Math.min(c.roundLimit,.5);this.newRoundJoinsSafeRads=2.3;c=this._lineIndexBuffer.index;for(var m=0,p=void 0,h=this.verticesLen,k=0;h>k;++k){var g=a[k],r=a[(k+h-1)%h],l=d&&this._isClipEdge(r,g),r=p===this.extrudeVectorsDoubleBuffer[k%
2]?this.extrudeVectorsDoubleBuffer[(k+1)%2]:this.extrudeVectorsDoubleBuffer[k%2];if(h-1>k||!d||this.hasPattern?(this._computeExtrudeVectors(r,k),this._writeGPUVertices(g.x,g.y,m,r,b),!r.capCenter||d&&k===h-1||this._writeGPUPieElements(r,l),d&&0===k&&!this.hasPattern&&y.copyExtrudeVectors(this.firstExtrudeVectors,r)):y.copyExtrudeVectors(r,this.firstExtrudeVectors),p&&this._writeGPUBridgeElements(p,r,l),h-1>k)p=a[k+1],g=y.length([p.x-g.x,p.y-g.y]),m+=g;p=r}this._lineIndexCount+=3*(this._lineIndexBuffer.index-
c)}}},b.prototype._computeExtrudeVectors=function(a,c){var b=this.vertices,d=this.verticesLen,h=this.isClosed,m=b[c],k=[void 0,void 0],p=[void 0,void 0];if(0<c&&d-1>c){var l=b[(c+d-1)%d],r=b[(c+1)%d];y.normalize(k,[m.x-l.x,m.y-l.y]);y.normalize(p,[r.x-m.x,r.y-m.y])}else if(0===c)r=b[(c+1)%d],(y.normalize(p,[r.x-m.x,r.y-m.y]),h)?(b=b[d-2],y.normalize(k,[m.x-b.x,m.y-b.y])):k=p;else{if(c!==d-1)return void console.error("Vertex index 'i' out of range.");l=b[(c+d-1)%d];(y.normalize(k,[m.x-l.x,m.y-l.y]),
h)?(b=b[1],y.normalize(p,[b.x-m.x,b.y-m.y])):p=k}h||0!==c?h||c!==d-1?this._computeJoinExtrudeVectors(a,k,p):this._computeCapExtrudeVectors(a,k,p,y.CapPosition.END):this._computeCapExtrudeVectors(a,k,p,y.CapPosition.START)},b.prototype._computeCapExtrudeVectors=function(a,b,p,n){0===this.cap?c.buttCap(a,b,p):1===this.cap?c.roundCap(a,b,p,n,y.getNumberOfSlices(Math.PI),n===y.CapPosition.START?-1:1):2===this.cap?c.squareCap(a,b,p,n):c.buttCap(a,b,p)},b.prototype._computeJoinExtrudeVectors=function(a,
b,p){var d=y.getRads(b,p);if(d>Math.PI-this.almostParallelRads)c.rectJoin(a,b,p);else if(0===this.join&&d>=this.veryShallowRads)c.bevelJoin(a,b,p,1);else if(1===this.join&&d>=this.veryShallowRads){var h=y.getNumberOfSlices(d);d<this.newRoundJoinsSafeRads?2>h||d<this.roundLimitRads?c.bevelJoin(a,b,p,1):c.roundJoin(a,b,p,h):c.unitRoundJoin(a,b,p,h)}else d<this.almostParallelRads?c.fastMiterJoin(a,b,p):d<this.miterSafeRads?c.miterJoin(a,b,p):c.bevelJoin(a,b,p,this.miterLimitMag)},b.prototype._writeGPUVertices=
function(a,c,b,p,h){for(var d=0;d<p.vectors.count;++d){var k=p.vectors.items[d].vector[0],n=p.vectors.items[d].vector[1],g=p.vectors.items[d].texCoords[0],l=p.vectors.items[d].texCoords[1];p.vectors.items[d].base=this._lineVertexBuffer.index;this._lineVertexBuffer.add(a,c,k,n,g,l,b,h)}},b.prototype._writeGPUBridgeElements=function(a,b,p){if(c.bridge(this.recycledTriangleBridge,a,b),!p)for(a=0;a<this.recycledTriangleBridge.count;++a)b=this.recycledTriangleBridge.items[a],this._lineIndexBuffer.add(b.v1.base,
b.v2.base,b.v3.base)},b.prototype._writeGPUPieElements=function(a,b){if(c.pie(this.recycledTrianglePie,a),!b)for(a=0;a<this.recycledTrianglePie.count;++a)b=this.recycledTrianglePie.items[a],this._lineIndexBuffer.add(b.v1.base,b.v2.base,b.v3.base)},b.prototype._isClipEdge=function(a,c){return a.x===c.x?-64>=a.x||4160<=a.x:a.y===c.y?-64>=a.y||4160<=a.y:!1},b}(u)})},"esri/views/2d/engine/webgl/LineTess":function(){define(["require","exports"],function(F,a){function l(a){var c,b={items:[],count:0};for(c=
0;a>c;++c)b.items.push(void 0);return b}function C(a,c){r.vector[0]=a.vector[0];r.vector[1]=a.vector[1];r.texCoords[0]=a.texCoords[0];r.texCoords[1]=a.texCoords[1];r.direction[0]=a.direction[0];r.direction[1]=a.direction[1];r.base=a.base;a.vector[0]=c.vector[0];a.vector[1]=c.vector[1];a.texCoords[0]=c.texCoords[0];a.texCoords[1]=c.texCoords[1];a.direction[0]=c.direction[0];a.direction[1]=c.direction[1];a.base=c.base;c.vector[0]=r.vector[0];c.vector[1]=r.vector[1];c.texCoords[0]=r.texCoords[0];c.texCoords[1]=
r.texCoords[1];c.direction[0]=r.direction[0];c.direction[1]=r.direction[1];c.base=r.base}function u(a,c){return a[0]*c[0]+a[1]*c[1]}function y(a){return Math.sqrt(u(a,a))}function q(a,c){var b=y(c);return a[0]=c[0]/b,a[1]=c[1]/b,a}function c(a,c){return a[0]=-c[1],a[1]=c[0],a}function b(a,c){return a[0]*c[1]-a[1]*c[0]}function p(a,c){return a[0]=-c[0],a[1]=-c[1],a}function d(a,c,b){return a[0]=c[0]*b,a[1]=c[1]*b,a}function k(a,c,b){return a[0]=c[0]+b[0],a[1]=c[1]+b[1],a}function g(a,c){a=u(a,c);return.999<
a?0:-.999>a?Math.PI:Math.acos(a)}function n(a,c,b,m,h){if(0===m)return void(a.count=0);var k=y(c),p=d(H[0],c,1/k);b=d(H[1],b,1/k);p=g(p,b);p=(h?-1:1)*p/m;h=Math.cos(p);p=Math.sin(p);b=c[0];var A=c[1];for(c=0;m-1>c;++c)k=b,b=h*k-p*A,A=p*k+h*A,a.items[c][0]=b,a.items[c][1]=A;a.count=m-1}function h(a){var c,b=a.count,d=Math.floor(b/2);for(c=0;d>c;++c){var m=a.items[c];a.items[c]=a.items[b-c-1];a.items[b-c-1]=m}}Object.defineProperty(a,"__esModule",{value:!0});var m;!function(a){a[a.ENTRY=1]="ENTRY";
a[a.EXIT=2]="EXIT";a[a.CAP=3]="CAP"}(m=a.VectorRole||(a.VectorRole={}));var G;!function(a){a[a.START=1]="START";a[a.END=2]="END"}(G=a.CapPosition||(a.CapPosition={}));a.SYSTEM_MAG_LIMIT=3.8;a.MITER_SAFE_RADS=2*Math.acos(1/a.SYSTEM_MAG_LIMIT);var I=a.SYSTEM_MAG_LIMIT*a.SYSTEM_MAG_LIMIT,x=16/(2*Math.PI);a.allocTriangles=function(a){var c,b={items:[],count:0};for(c=0;a>c;++c)b.items.push({v1:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v2:{vector:[void 0,void 0],texCoords:[void 0,
void 0],direction:[void 0,void 0]},v3:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]}});return b};a.allocExtrudeVectors=function(){var a,c={items:[],count:0};for(a=0;30>a;++a)c.items.push({vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]});a={};a[m.ENTRY]=l(20);a[m.EXIT]=l(20);a[m.CAP]=l(20);return{vectors:c,lists:a}};a.copyExtrudeVectors=function(a,c){var b;for(b=0;b<c.vectors.count;++b)a.vectors.items[b].vector[0]=c.vectors.items[b].vector[0],
a.vectors.items[b].vector[1]=c.vectors.items[b].vector[1],a.vectors.items[b].texCoords[0]=c.vectors.items[b].texCoords[0],a.vectors.items[b].texCoords[1]=c.vectors.items[b].texCoords[1],a.vectors.items[b].direction[0]=c.vectors.items[b].direction[0],a.vectors.items[b].direction[1]=c.vectors.items[b].direction[1],a.vectors.items[b].base=c.vectors.items[b].base;a.vectors.count=c.vectors.count;var d=c.lists[m.ENTRY],h=a.lists[m.ENTRY],k=c.lists[m.EXIT],p=a.lists[m.EXIT],n=c.lists[m.CAP],g=a.lists[m.CAP];
for(b=0;b<d.count;++b)h.items[b]=d.items[b];h.count=d.count;for(b=0;b<k.count;++b)p.items[b]=k.items[b];p.count=k.count;for(b=0;b<n.count;++b)g.items[b]=n.items[b];g.count=n.count;a.capCenter=c.capCenter};var r={vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0],base:void 0};a.swapExtrudeVectors=C;var H=[];for(F=0;32>F;++F)H.push([void 0,void 0]);var w=function(a){var c,b={items:[],count:0};for(c=0;a>c;++c)b.items.push([void 0,void 0]);return b}(16);a.length=y;a.normalize=
q;a.getNumberOfSlices=function(a){return Math.max(Math.round(a*x),1)};a.getRads=g;a.reverse=h;var z=[void 0,void 0],B=[void 0,void 0],D=[0,0],U=[0,0],R=[0,0],Q=[0,0],N=Math.cos(Math.PI/4),K=Math.sin(Math.PI/4),T=Math.sqrt(2);F=function(){function a(a){this._distanceAlongCorrection=a.distanceAlongCorrection}return a.prototype.bridge=function(a,c,b){var d,h,k=c.vectors,p=c.lists[m.EXIT];h=b.vectors;var n=b.lists[m.ENTRY];if(p.count===n.count+1)b=p.items,c=k.items,d=n.items,h=h.items;else{if(n.count!==
p.count+1&&p.count!==n.count)return console.error("Cannot bridge "+p.count+" to "+n.count+"."),void(a.count=0);b=n.items;c=h.items;d=p.items;h=k.items}k=p.count+n.count-2;a.count=k;z[0]=b;z[1]=d;B[0]=c;B[1]=h;for(b=0;k>b;++b)c=a.items[b],d=(b+0)%2,d=B[d][z[d][Math.floor((b+0)/2)]],c.v1.vector[0]=d.vector[0],c.v1.vector[1]=d.vector[1],c.v1.texCoords[0]=d.texCoords[0],c.v1.texCoords[1]=d.texCoords[1],c.v1.direction[0]=d.direction[0],c.v1.direction[1]=d.direction[1],c.v1.base=d.base,d=(b+1)%2,d=B[d][z[d][Math.floor((b+
1)/2)]],c.v2.vector[0]=d.vector[0],c.v2.vector[1]=d.vector[1],c.v2.texCoords[0]=d.texCoords[0],c.v2.texCoords[1]=d.texCoords[1],c.v2.direction[0]=d.direction[0],c.v2.direction[1]=d.direction[1],c.v2.base=d.base,d=(b+2)%2,d=B[d][z[d][Math.floor((b+2)/2)]],c.v3.vector[0]=d.vector[0],c.v3.vector[1]=d.vector[1],c.v3.texCoords[0]=d.texCoords[0],c.v3.texCoords[1]=d.texCoords[1],c.v3.direction[0]=d.direction[0],c.v3.direction[1]=d.direction[1],c.v3.base=d.base,d=c.v1.base&&c.v1.base.point||D,p=c.v2.base&&
c.v2.base.point||D,h=c.v3.base&&c.v3.base.point||D,U[0]=d[0]+c.v1.vector[0],U[1]=d[1]+c.v1.vector[1],R[0]=p[0]+c.v2.vector[0],R[1]=p[1]+c.v2.vector[1],Q[0]=h[0]+c.v3.vector[0],Q[1]=h[1]+c.v3.vector[1],0>(R[0]-U[0])*(Q[1]-U[1])-(Q[0]-U[0])*(R[1]-U[1])||C(c.v2,c.v3)},a.prototype.pie=function(a,c){if(0===c.lists[m.CAP].count)return void(a.count=0);if(1===c.lists[m.CAP].count)return console.error("A single vector is not enough to define a pie."),void(a.count=0);a.count=c.lists[m.CAP].count-1;var b;for(b=
0;b<a.count;++b){var d=a.items[b],h=c.vectors.items[c.lists[m.CAP].items[b]];d.v1.vector[0]=h.vector[0];d.v1.vector[1]=h.vector[1];d.v1.texCoords[0]=h.texCoords[0];d.v1.texCoords[1]=h.texCoords[1];d.v1.direction[0]=h.direction[0];d.v1.direction[1]=h.direction[1];d.v1.base=h.base;h=c.vectors.items[c.lists[m.CAP].items[b+1]];d.v2.vector[0]=h.vector[0];d.v2.vector[1]=h.vector[1];d.v2.texCoords[0]=h.texCoords[0];d.v2.texCoords[1]=h.texCoords[1];d.v2.direction[0]=h.direction[0];d.v2.direction[1]=h.direction[1];
d.v2.base=h.base;h=c.vectors.items[c.capCenter];d.v3.vector[0]=h.vector[0];d.v3.vector[1]=h.vector[1];d.v3.texCoords[0]=h.texCoords[0];d.v3.texCoords[1]=h.texCoords[1];d.v3.direction[0]=h.direction[0];d.v3.direction[1]=h.direction[1];d.v3.base=h.base;var h=d.v1.base&&d.v1.base.point||D,k=d.v2.base&&d.v2.base.point||D,p=d.v3.base&&d.v3.base.point||D;U[0]=h[0]+d.v1.vector[0];U[1]=h[1]+d.v1.vector[1];R[0]=k[0]+d.v2.vector[0];R[1]=k[1]+d.v2.vector[1];Q[0]=p[0]+d.v3.vector[0];Q[1]=p[1]+d.v3.vector[1];
0>(R[0]-U[0])*(Q[1]-U[1])-(Q[0]-U[0])*(R[1]-U[1])||C(d.v2,d.v3)}},a.prototype.buttCap=function(a,c,b){this.fastMiterJoin(a,c,b)},a.prototype.roundCap=function(a,c,b,d,h,k){void 0===k&&(k=0);this.fastMiterJoin(a,c,b);b=d===G.START?0:1;d=d===G.START?1:0;a.capCenter=a.vectors.count;c=a.vectors.items[a.capCenter];c.vector[0]=0;c.vector[1]=0;c.texCoords[0]=0;c.texCoords[1]=0;c.direction[0]=0;c.direction[1]=0;++a.vectors.count;n(w,a.vectors.items[b].vector,a.vectors.items[d].vector,h,!1);h=a.vectors.count;
c=a.lists[m.CAP];c.items[0]=b;var p=a.vectors.items[b].texCoords[1],g=a.vectors.items[d].texCoords[1];for(b=0;b<w.count;++b){var l=k*(1-Math.abs(w.count/2-b)/(w.count/2)),r=p+b/(w.count-1)*(g-p),q=w.items[b],E=a.vectors.items[h+b];E.vector[0]=q[0];E.vector[1]=q[1];E.texCoords[0]=l;E.texCoords[1]=r;E.direction[0]=0;E.direction[1]=0;c.items[b+1]=h+b}c.items[w.count+1]=d;c.count=w.count+2;a.vectors.count=h+w.count},a.prototype.squareCap=function(a,c,b,m){this.fastMiterJoin(a,c,b);c=m===G.START?0:1;b=
m===G.START?1:0;var h=H[0],k=H[1],p=H[2],n=H[3];m=H[4];var g=a.vectors.items[c].vector;h[0]=N*g[0]-K*g[1];h[1]=K*g[0]+N*g[1];d(n,h,T);k[0]=N*h[0]-K*h[1];k[1]=K*h[0]+N*h[1];p[0]=N*k[0]-K*k[1];p[1]=K*k[0]+N*k[1];d(m,p,T);c=a.vectors.items[c];c.vector[0]=n[0];c.vector[1]=n[1];a=a.vectors.items[b];a.vector[0]=m[0];a.vector[1]=m[1]},a.prototype.fastMiterJoin=function(a,b,d){d=c(H[0],d);b=p(H[1],d);var h=a.vectors.items[0];h.vector[0]=d[0];h.vector[1]=d[1];h.texCoords[0]=0;h.texCoords[1]=-1;h.direction[0]=
0;h.direction[1]=0;d=a.vectors.items[1];d.vector[0]=b[0];d.vector[1]=b[1];d.texCoords[0]=0;d.texCoords[1]=1;d.direction[0]=0;d.direction[1]=0;a.vectors.count=2;b=a.lists[m.ENTRY];b.items[0]=0;b.items[1]=1;b.count=2;b=a.lists[m.EXIT];b.items[0]=0;b.items[1]=1;b.count=2;a.lists[m.CAP].count=0;a.capCenter=void 0},a.prototype.miterJoin=function(a,b,h){var k=c(H[0],b),n=c(H[1],h),g=H[2];g[0]=k[0]+n[0];g[1]=k[1]+n[1];n=q(H[3],g);k=u(n,k);n=d(H[4],n,1/k);k=p(H[5],n);this._distanceAlongCorrection?(g=a.vectors.items[0],
g.vector[0]=n[0],g.vector[1]=n[1],g.texCoords[0]=0,g.texCoords[1]=-1,g.direction[0]=b[0],g.direction[1]=b[1],g=a.vectors.items[1],g.vector[0]=k[0],g.vector[1]=k[1],g.texCoords[0]=0,g.texCoords[1]=1,g.direction[0]=b[0],g.direction[1]=b[1],b=a.vectors.items[2],b.vector[0]=n[0],b.vector[1]=n[1],b.texCoords[0]=0,b.texCoords[1]=-1,b.direction[0]=h[0],b.direction[1]=h[1],b=a.vectors.items[3],b.vector[0]=k[0],b.vector[1]=k[1],b.texCoords[0]=0,b.texCoords[1]=1,b.direction[0]=h[0],b.direction[1]=h[1],a.vectors.count=
4,h=a.lists[m.ENTRY],h.items[0]=0,h.items[1]=1,h.count=2,h=a.lists[m.EXIT],h.items[0]=2,h.items[1]=3):(g=a.vectors.items[0],g.vector[0]=n[0],g.vector[1]=n[1],g.texCoords[0]=0,g.texCoords[1]=-1,g.direction[0]=0,g.direction[1]=0,g=a.vectors.items[1],g.vector[0]=k[0],g.vector[1]=k[1],g.texCoords[0]=0,g.texCoords[1]=1,g.direction[0]=0,g.direction[1]=0,a.vectors.count=2,h=a.lists[m.ENTRY],h.items[0]=0,h.items[1]=1,h.count=2,h=a.lists[m.EXIT],h.items[0]=0,h.items[1]=1);h.count=2;a.lists[m.CAP].count=0;
a.capCenter=void 0},a.prototype.bevelJoin=function(a,n,g,l){var r=l*l;l=b(n,g);var w=0<l?[-1,1]:[1,-1],x=w[0],w=w[1],G=0<l?p(H[0],c(H[1],n)):c(H[2],n),z=0<l?p(H[3],c(H[4],g)):c(H[5],g),v=H[6];v[0]=G[0]+z[0];v[1]=G[1]+z[1];var E=q(H[7],v),A=p(H[8],E),y=u(E,G),v=b(E,G),J=Math.abs(v/y),v=1+J*J,D=I>v?[J,this._distanceAlongCorrection]:[Math.sqrt(I-1),!0],B=D[0],D=D[1],L=r>v?[J,this._distanceAlongCorrection]:[Math.sqrt(r-1),!0],J=L[0];(L=L[1])&&D?(D=a.vectors.items[0],k(D.vector,p(H[9],G),d(H[10],p(H[11],
n),B)),D.texCoords[0]=0,D.texCoords[1]=x,D.direction[0]=this._distanceAlongCorrection?n[0]:0,D.direction[1]=this._distanceAlongCorrection?n[1]:0,A=a.vectors.items[1],k(A.vector,p(H[12],z),d(H[13],g,B)),A.texCoords[0]=0,A.texCoords[1]=x,A.direction[0]=this._distanceAlongCorrection?g[0]:0,A.direction[1]=this._distanceAlongCorrection?g[1]:0,x=a.vectors.items[2],x.vector[0]=0,x.vector[1]=0,x.texCoords[0]=0,x.texCoords[1]=0,x.direction[0]=0,x.direction[1]=0,x=a.vectors.items[3],k(x.vector,G,d(H[14],n,
J)),x.texCoords[0]=0,x.texCoords[1]=w,x.direction[0]=this._distanceAlongCorrection?n[0]:0,x.direction[1]=this._distanceAlongCorrection?n[1]:0,n=a.vectors.items[4],k(n.vector,z,d(H[15],p(H[16],g),J)),n.texCoords[0]=0,n.texCoords[1]=w,n.direction[0]=this._distanceAlongCorrection?g[0]:0,n.direction[1]=this._distanceAlongCorrection?g[1]:0,a.vectors.count=5,g=a.lists[m.ENTRY],g.items[0]=0,g.items[1]=2,g.items[2]=3,g.count=3,g=a.lists[m.EXIT],(g.items[0]=1,g.items[1]=2,g.items[2]=4,g.count=3,r>v)?(r=a.lists[m.CAP],
r.count=0,a.capCenter=void 0):(r=a.lists[m.CAP],r.items[0]=3,r.items[1]=4,r.count=2,a.capCenter=2)):!L&&D?(D=a.vectors.items[0],k(D.vector,p(H[9],G),d(H[10],p(H[11],n),B)),D.texCoords[0]=0,D.texCoords[1]=x,D.direction[0]=this._distanceAlongCorrection?n[0]:0,D.direction[1]=this._distanceAlongCorrection?n[1]:0,A=a.vectors.items[1],k(A.vector,p(H[12],z),d(H[13],g,B)),A.texCoords[0]=0,A.texCoords[1]=x,A.direction[0]=this._distanceAlongCorrection?g[0]:0,A.direction[1]=this._distanceAlongCorrection?g[1]:
0,x=a.vectors.items[2],x.vector[0]=0,x.vector[1]=0,x.texCoords[0]=0,x.texCoords[1]=0,x.direction[0]=0,x.direction[1]=0,x=a.vectors.items[3],d(x.vector,E,1/y),x.texCoords[0]=0,x.texCoords[1]=w,x.direction[0]=0,x.direction[1]=0,a.vectors.count=4,g=a.lists[m.ENTRY],g.items[0]=0,g.items[1]=2,g.items[2]=3,g.count=3,g=a.lists[m.EXIT],g.items[0]=1,g.items[1]=2,g.items[2]=3,g.count=3,a.lists[m.CAP].count=0,a.capCenter=void 0):L&&!D?(D=a.vectors.items[0],d(D.vector,A,1/y),D.texCoords[0]=0,D.texCoords[1]=x,
D.direction[0]=0,D.direction[1]=0,A=a.vectors.items[1],A.vector[0]=0,A.vector[1]=0,A.texCoords[0]=0,A.texCoords[1]=0,A.direction[0]=0,A.direction[1]=0,x=a.vectors.items[2],k(x.vector,G,d(H[9],n,J)),x.texCoords[0]=0,x.texCoords[1]=w,x.direction[0]=this._distanceAlongCorrection?n[0]:0,x.direction[1]=this._distanceAlongCorrection?n[1]:0,x=a.vectors.items[3],k(x.vector,z,d(H[10],p(H[11],g),J)),x.texCoords[0]=0,x.texCoords[1]=w,x.direction[0]=this._distanceAlongCorrection?g[0]:0,x.direction[1]=this._distanceAlongCorrection?
g[1]:0,a.vectors.count=4,g=a.lists[m.ENTRY],g.items[0]=0,g.items[1]=1,g.items[2]=2,g.count=3,g=a.lists[m.EXIT],(g.items[0]=0,g.items[1]=1,g.items[2]=3,g.count=3,r>v)?(r=a.lists[m.CAP],r.count=0,a.capCenter=void 0):(r=a.lists[m.CAP],r.items[0]=2,r.items[1]=3,r.count=2,a.capCenter=1)):L||D||(D=a.vectors.items[0],d(D.vector,A,1/y),D.texCoords[0]=0,D.texCoords[1]=x,D.direction[0]=0,D.direction[1]=0,A=a.vectors.items[1],d(A.vector,E,1/y),A.texCoords[0]=0,A.texCoords[1]=w,A.direction[0]=0,A.direction[1]=
0,a.vectors.count=2,g=a.lists[m.ENTRY],g.items[0]=0,g.items[1]=1,g.count=2,g=a.lists[m.EXIT],g.items[0]=0,g.items[1]=1,g.count=2,a.lists[m.CAP].count=0,a.capCenter=void 0);0>l&&(h(a.lists[m.ENTRY]),h(a.lists[m.EXIT]))},a.prototype.roundJoin=function(a,g,r,l){var x=b(g,r),G=0<x?[-1,1]:[1,-1],z=G[0],G=G[1],v=0<x?p(H[0],c(H[1],g)):c(H[2],g),A=0<x?p(H[3],c(H[4],r)):c(H[5],r),D=H[6];D[0]=v[0]+A[0];D[1]=v[1]+A[1];var E=q(H[7],D),D=p(H[8],E),y=u(E,v),E=b(E,v),E=Math.abs(E/y),B=I>1+E*E?[E,this._distanceAlongCorrection]:
[Math.sqrt(I-1),!0],E=B[0];B[1]?(B=a.vectors.items[0],B.vector[0]=v[0],B.vector[1]=v[1],B.texCoords[0]=0,B.texCoords[1]=G,B.direction[0]=0,B.direction[1]=0,B=a.vectors.items[1],B.vector[0]=A[0],B.vector[1]=A[1],B.texCoords[0]=0,B.texCoords[1]=G,B.direction[0]=0,B.direction[1]=0,B=a.vectors.items[2],k(B.vector,p(H[9],v),d(H[10],p(H[11],g),E)),B.texCoords[0]=0,B.texCoords[1]=z,B.direction[0]=this._distanceAlongCorrection?g[0]:0,B.direction[1]=this._distanceAlongCorrection?g[1]:0,g=a.vectors.items[3],
k(g.vector,p(H[12],A),d(H[13],r,E)),g.texCoords[0]=0,g.texCoords[1]=z,g.direction[0]=this._distanceAlongCorrection?r[0]:0,g.direction[1]=this._distanceAlongCorrection?r[1]:0,r=a.vectors.items[4],r.vector[0]=0,r.vector[1]=0,r.texCoords[0]=0,r.texCoords[1]=0,r.direction[0]=0,r.direction[1]=0,a.vectors.count=5,r=a.lists[m.ENTRY],r.items[0]=2,r.items[1]=4,r.items[2]=0,r.count=3,r=a.lists[m.EXIT],r.items[0]=3,r.items[1]=4,r.items[2]=1,r.count=3,a.capCenter=4):(B=a.vectors.items[0],B.vector[0]=v[0],B.vector[1]=
v[1],B.texCoords[0]=0,B.texCoords[1]=G,B.direction[0]=0,B.direction[1]=0,B=a.vectors.items[1],B.vector[0]=A[0],B.vector[1]=A[1],B.texCoords[0]=0,B.texCoords[1]=G,B.direction[0]=0,B.direction[1]=0,B=a.vectors.items[2],d(B.vector,D,1/y),B.texCoords[0]=0,B.texCoords[1]=z,B.direction[0]=0,B.direction[1]=0,g=a.vectors.items[3],g.vector[0]=0,g.vector[1]=0,g.texCoords[0]=0,g.texCoords[1]=0,g.direction[0]=0,g.direction[1]=0,a.vectors.count=4,r=a.lists[m.ENTRY],r.items[0]=2,r.items[1]=3,r.items[2]=0,r.count=
3,r=a.lists[m.EXIT],r.items[0]=2,r.items[1]=3,r.items[2]=1,r.count=3,a.capCenter=3);n(w,v,A,l,0>x);l=a.vectors.count;v=a.lists[m.CAP];for(A=v.items[0]=0;A<w.count;++A)r=w.items[A],z=a.vectors.items[l+A],z.vector[0]=r[0],z.vector[1]=r[1],z.texCoords[0]=0,z.texCoords[1]=G,z.direction[0]=0,z.direction[1]=0,v.items[A+1]=l+A;v.items[w.count+1]=1;v.count=w.count+2;a.vectors.count=l+w.count;0>x&&(h(a.lists[m.ENTRY]),h(a.lists[m.EXIT]))},a.prototype.unitRoundJoin=function(a,d,g,k){var r=b(d,g),l=0<r?[-1,
1]:[1,-1],x=l[0],l=l[1];d=0<r?p(H[0],c(H[1],d)):c(H[2],d);g=0<r?p(H[3],c(H[4],g)):c(H[5],g);var q=a.vectors.items[0];q.vector[0]=d[0];q.vector[1]=d[1];q.texCoords[0]=0;q.texCoords[1]=l;q.direction[0]=0;q.direction[1]=0;q=a.vectors.items[1];q.vector[0]=g[0];q.vector[1]=g[1];q.texCoords[0]=0;q.texCoords[1]=l;q.direction[0]=0;q.direction[1]=0;q=a.vectors.items[2];p(q.vector,d);q.texCoords[0]=0;q.texCoords[1]=x;q.direction[0]=0;q.direction[1]=0;q=a.vectors.items[3];p(q.vector,g);q.texCoords[0]=0;q.texCoords[1]=
x;q.direction[0]=0;q.direction[1]=0;x=a.vectors.items[4];x.vector[0]=0;x.vector[1]=0;x.texCoords[0]=0;x.texCoords[1]=0;x.direction[0]=0;x.direction[1]=0;a.vectors.count=5;x=a.lists[m.ENTRY];x.items[0]=2;x.items[1]=0;x.count=2;x=a.lists[m.EXIT];x.items[0]=3;x.items[1]=1;x.count=2;a.capCenter=4;n(w,d,g,k,0>r);k=a.vectors.count;d=a.lists[m.CAP];for(x=d.items[0]=0;x<w.count;++x)g=w.items[x],q=a.vectors.items[k+x],q.vector[0]=g[0],q.vector[1]=g[1],q.texCoords[0]=0,q.texCoords[1]=l,q.direction[0]=0,q.direction[1]=
0,d.items[x+1]=k+x;d.items[w.count+1]=1;d.count=w.count+2;a.vectors.count=k+w.count;0>r&&(h(a.lists[m.ENTRY]),h(a.lists[m.EXIT]))},a.prototype.rectJoin=function(a,b,d){b=c(H[0],b);d=c(H[1],d);var h=a.vectors.items[0];h.vector[0]=b[0];h.vector[1]=b[1];h.texCoords[0]=0;h.texCoords[1]=-1;h.direction[0]=0;h.direction[1]=0;h=a.vectors.items[1];h.vector[0]=d[0];h.vector[1]=d[1];h.texCoords[0]=0;h.texCoords[1]=-1;h.direction[0]=0;h.direction[1]=0;h=a.vectors.items[2];p(h.vector,b);h.texCoords[0]=0;h.texCoords[1]=
1;h.direction[0]=0;h.direction[1]=0;b=a.vectors.items[3];p(b.vector,d);b.texCoords[0]=0;b.texCoords[1]=1;b.direction[0]=0;b.direction[1]=0;a.vectors.count=4;b=a.lists[m.ENTRY];b.items[0]=0;b.items[1]=2;b.count=2;b=a.lists[m.EXIT];b.items[0]=1;b.items[1]=3;b.count=2;a.capCenter=void 0},a}();a.Tessellator=F})},"esri/views/vectorTiles/SymbolBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ../2d/engine/webgl/Geometry ./style/StyleLayer ./Placement ./GeometryUtils ./TextShaping dojox/string/BidiEngine".split(" "),
function(F,a,l,C,u,y,q,c,b,p,d){function k(a,c){return a.iconMosaicItem&&c.iconMosaicItem?a.iconMosaicItem.page===c.iconMosaicItem.page?0:a.iconMosaicItem.page<c.iconMosaicItem.page?-1:1:a.iconMosaicItem&&!c.iconMosaicItem?1:!a.iconMosaicItem&&c.iconMosaicItem?-1:0}return function(){return function(){}}(),function(a){function g(c,b,d,g,k,p,n,l){b=a.call(this,c,b)||this;if(b._markerMap=new Map,b._glyphMap=new Map,b._glyphBufferDataStorage=new Map,b._sdfMarkers=!1,c.hasDataDrivenIcon!==d.isDataDriven())throw Error("incompatible icon buffer");
if(c.hasDataDrivenText!==k.isDataDriven())throw Error("incompatible text buffer");return b._iconVertexBuffer=d,b._iconIndexBuffer=g,b._textVertexBuffer=k,b._textIndexBuffer=p,b._placementEngine=n,b._workerTileHandler=l,b}return l(g,a),Object.defineProperty(g.prototype,"markerPageMap",{get:function(){return this._markerMap},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"glyphsPageMap",{get:function(){return this._glyphMap},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,
"sdfMarker",{get:function(){return this._sdfMarkers},enumerable:!0,configurable:!0}),g.prototype.copy=function(a,c,b,d,k){a=new g(this.layer,this.zoom,a,c,b,d,k,this._workerTileHandler);return a.layerIndex=this.layerIndex,a.layerExtent=this.layerExtent,a._iconIndexStart=c.index,a._textIndexStart=d.index,a._iconIndexCount=0,a._textIndexCount=0,a._symbolInstances=this._symbolInstances,a._workerTileHandler=this._workerTileHandler,a._fontArray=this._fontArray,a._textLayout=this._textLayout,a._iconLayout=
this._iconLayout,a._isLinePlacement=this._isLinePlacement,a._avoidEdges=this._avoidEdges,a},g.prototype.getResources=function(a,c,b){var d=this.layer,h=this.zoom,m=d.hasDataDrivenIcon,k=d.hasDataDrivenText;a&&a.setExtent(this.layerExtent);for(var p=d.getLayoutProperty("icon-image"),n=d.getLayoutProperty("text-field"),l=d.getLayoutValue("text-font",h),q=d.getLayoutValue("text-transform",h),G=[],u=0,y=this._features;u<y.length;u++){var N=y[u],K=N.getGeometry(a);if(K&&0!==K.length){var C=void 0;p&&(C=
d.getLayoutValue("icon-image",h,N),p.isDataDriven||(C=this._replaceKeys(C,N.values)),C&&c.add(C));var v=void 0,E=!1;if(n&&(v=d.getLayoutValue("text-field",h,N),n.isDataDriven||(v=this._replaceKeys(v,N.values)),v)){switch(q){case 2:v=v.toLowerCase();break;case 1:v=v.toUpperCase()}g._bidiEngine.hasBidiChar(v)&&(E=void 0,E="rtl"===g._bidiEngine.checkContextual(v)?"IDNNN":"ICNNN",v=g._bidiEngine.bidiTransform(v,E,"VLYSN"),E=!0);var A=v.length;if(0<A)for(var J=0,L=l;J<L.length;J++){var F=L[J],M=b[F];M||
(M=b[F]=new Set);for(F=0;A>F;F++){var V=v.charCodeAt(F);M.add(V)}}}if(C||v)A=d.getLayoutValue("icon-size",h,N),J=d.getLayoutValue("text-size",h,N),N={sprite:C,label:v,rtl:E,geometry:K,iconSize:A,iconRotate:d.getLayoutValue("icon-rotate",h,N),ddIconValues:m?{color:d.getPaintValue("icon-color",h,N),opacity:d.getPaintValue("icon-opacity",h,N),size:A}:null,textSize:J,textRotate:d.getLayoutValue("text-rotate",h,N),ddTextValues:k?{color:d.getPaintValue("text-color",h,N),opacity:d.getPaintValue("text-opacity",
h,N),size:J}:null},G.push(N)}}this._symbolFeatures=G},g.prototype.processFeatures=function(a,d){a&&a.setExtent(this.layerExtent);var h,m,n=this.layer,r=this.zoom;d=this._isLinePlacement=1===n.getLayoutValue("symbol-placement",r);a=this._avoidEdges=n.getLayoutValue("symbol-avoid-edges",r)&&!d;var l=8*n.getLayoutValue("symbol-spacing",r),w=n.getLayoutProperty("icon-image"),z=n.getLayoutProperty("text-field"),u=this._workerTileHandler;w&&(this._iconLayout=new q.IconLayout(n,r,d),h=u.getSpriteItems(),
m=this._getTranslate(!0));var D,y,R;if(z){D=this._textLayout=new q.TextLayout(n,r,d);this._fontArray=D.fontArray;R=.5;switch(D.anchor){case 5:case 1:case 7:R=0;break;case 6:case 2:case 8:R=1}y=.5;switch(D.anchor){case 5:case 3:case 6:y=0;break;case 7:case 4:case 8:y=1}n=.5;switch(D.justify){case 0:n=0;break;case 2:n=1}var r=24*D.letterSpacing,w=d?0:24*D.maxWidth,z=24*D.lineHeight,C=[24*D.offset[0],24*D.offset[1]];D=this._fontArray.map(function(a){return u.getGlyphItems(a)});y=new p(D,w,z,r,C,R,y,
n);R=this._getTranslate(!1)}this._iconIndexStart=this._iconIndexBuffer.index;this._textIndexStart=this._textIndexBuffer.index;this._textIndexCount=this._iconIndexCount=0;this._markerMap.clear();this._glyphMap.clear();this._symbolInstances=n=[];r=this._textLayout;w=1;r&&r.size&&(w=r.size/24);z=r?r.maxAngle*b.C_DEG_TO_RAD:0;D=r?8*r.size:0;for(var C=0,N=this._symbolFeatures;C<N.length;C++){var K=N[C],F=void 0;K.sprite&&(F=h[K.sprite],F&&F.sdf&&(this._sdfMarkers=!0));var v=void 0,E=K.label,A=0;if(E&&
(v=y.getShaping(E,K.rtl),v&&0<v.length)){for(var A=1E30,E=-1E30,J=0,L=v;J<L.length;J++)var S=L[J],A=Math.min(A,S.x),E=Math.max(E,S.x);A=(E-A+48)*w*8}E=0;for(J=K.geometry;E<J.length;E++){var L=J[E],M=void 0;d?(v&&0<v.length&&r&&r.size&&g._smoothVertices(L,8*r.size*(2+Math.min(2,4*Math.abs(r.offset[1])))),M=g._findAnchors(L,l,A)):M=[new c.Anchor(L[0].x,L[0].y)];for(S=0;S<M.length;S++){var V=M[S];0>V.x||4096<V.x||0>V.y||4096<V.y||d&&0<A&&0===r.rotationAlignment&&!g._honorsTextMaxAngle(L,V,A,z,D)||n.push({shaping:v,
line:L,iconMosaicItem:F,anchor:V,iconSize:K.iconSize,iconRotate:K.iconRotate,ddIconValues:K.ddIconValues,textSize:K.textSize,textRotate:K.textRotate,ddTextValues:K.ddTextValues})}}}n.sort(k);for(h=0;h<n.length;h++)this._processFeature(n[h],m,R,a);this._addPlacedGlyphs()},g.prototype.updateSymbols=function(){this._iconIndexStart=this._iconIndexBuffer.index;this._textIndexStart=this._textIndexBuffer.index;this._textIndexCount=this._iconIndexCount=0;this._markerMap.clear();this._glyphMap.clear();var a,
c=this._avoidEdges,b=this.layer;b.getLayoutProperty("icon-image")&&(a=this._getTranslate(!0));var d;b.getLayoutProperty("text-field")&&(d=this._getTranslate(!1));for(var b=0,g=this._symbolInstances;b<g.length;b++)this._processFeature(g[b],a,d,c);this._addPlacedGlyphs()},g.prototype._getTranslate=function(a){var c=this.layer.getPaintValue(a?"icon-translate":"text-translate",this.zoom);if(0!==c[0]||0!==c[1]){var b=this._placementEngine.mapAngle;return 0!==b&&0===this.layer.getPaintValue(a?"icon-translate-anchor":
"text-translate-anchor",this.zoom)?(a=Math.sin(b),b=Math.cos(b),[8*(c[0]*b-c[1]*a),8*(c[0]*a+c[1]*b)]):[8*c[0],8*c[1]]}},g.prototype._replaceKeys=function(a,c){return a.replace(/{([^{}]+)}/g,function(a,b){return b in c?c[b]:""})},g.prototype._processFeature=function(a,c,d,g){var h=a.line,m=a.iconMosaicItem,k=a.shaping,p=a.anchor,n=this._iconLayout,l=n&&!!m,q=!0,u=1;l&&(n.size=a.iconSize,n.rotate=a.iconRotate,u=8*n.size,q=n.optional||!m);var G=this._textLayout,I=G&&k&&0<k.length,C=1,K=C,F=!0;I&&(G.size=
a.textSize,G.rotate=a.textRotate,C=G.size/24,K=8*C,F=G.optional||!k||0===k.length);var v,C=new y.Point(0,-17);if(l){if(v=this._placementEngine.getIconPlacement(p,c,m,u,h,n,g),v.footprint.minzoom===b.C_INFINITY&&!q)return;p.minzoom>v.footprint.minzoom&&(v.footprint.minzoom=p.minzoom)}var E;if(I&&(E=this._placementEngine.getTextPlacement(p,d,C,k,K,h,G,g))){if(E.footprint.minzoom===b.C_INFINITY&&!F)return;p.minzoom>E.footprint.minzoom&&(E.footprint.minzoom=p.minzoom)}if(!F&&!q||!q&&E&&E.footprint.minzoom!==
b.C_INFINITY||!F&&v&&v.footprint.minzoom!==b.C_INFINITY)c=Math.max(v.footprint.minzoom,E.footprint.minzoom),v.footprint.minzoom=c,E.footprint.minzoom=c;E&&E.footprint.minzoom!==b.C_INFINITY&&(G.ignorePlacement||this._placementEngine.add(E),this._storePlacedGlyphs(E.shapes,E.footprint.minzoom,this.zoom,a.ddTextValues));v&&v.footprint.minzoom!==b.C_INFINITY&&(n.ignorePlacement||this._placementEngine.add(v),this._addPlacedIcons(v.shapes,v.footprint.minzoom,this.zoom,m.page,a.ddIconValues))},g.prototype._addPlacedIcons=
function(a,c,d,g,k){c=Math.max(d+b.log2(c),0);for(var h=this._iconVertexBuffer,m=this._iconIndexBuffer,p=0;p<a.length;p++){var n=a[p],l=Math.max(d+b.log2(n.minzoom),c),q=Math.min(d+b.log2(n.maxzoom),25);if(!(l>=q)){var x=n.tl,u=n.tr,G=n.bl,y=n.br,I=n.mosaicRect,C=n.labelAngle,n=n.anchor,v=h.index,E=I.x,A=I.y,F=E+I.width,I=A+I.height;h.add(n.x,n.y,x.x,x.y,E,A,C,l,q,c,k);h.add(n.x,n.y,u.x,u.y,F,A,C,l,q,c,k);h.add(n.x,n.y,G.x,G.y,E,I,C,l,q,c,k);h.add(n.x,n.y,y.x,y.y,F,I,C,l,q,c,k);m.add(v+0,v+1,v+2);
m.add(v+1,v+2,v+3);this._markerMap.has(g)?this._markerMap.get(g)[1]+=6:this._markerMap.set(g,[this._iconIndexStart+this._iconIndexCount,6]);this._iconIndexCount+=2}}},g.prototype._addPlacedGlyphs=function(){var a=this,c=this._textVertexBuffer,b=this._textIndexBuffer;this._glyphBufferDataStorage.forEach(function(d,h){for(var m=0;m<d.length;m++){var g=d[m],k=c.index;c.add(g.glyphAnchor[0],g.glyphAnchor[1],g.tl[0],g.tl[1],g.xmin,g.ymin,g.labelAngle,g.minLod,g.maxLod,g.placementLod,g.ddValues);c.add(g.glyphAnchor[0],
g.glyphAnchor[1],g.tr[0],g.tr[1],g.xmax,g.ymin,g.labelAngle,g.minLod,g.maxLod,g.placementLod,g.ddValues);c.add(g.glyphAnchor[0],g.glyphAnchor[1],g.bl[0],g.bl[1],g.xmin,g.ymax,g.labelAngle,g.minLod,g.maxLod,g.placementLod,g.ddValues);c.add(g.glyphAnchor[0],g.glyphAnchor[1],g.br[0],g.br[1],g.xmax,g.ymax,g.labelAngle,g.minLod,g.maxLod,g.placementLod,g.ddValues);b.add(k+0,k+1,k+2);b.add(k+1,k+2,k+3);a._glyphMap.has(h)?a._glyphMap.get(h)[1]+=6:a._glyphMap.set(h,[a._textIndexStart+a._textIndexCount,6]);
a._textIndexCount+=2}});this._glyphBufferDataStorage.clear()},g.prototype._storePlacedGlyphs=function(a,c,d,g){c=Math.max(d+b.log2(c),0);for(var h=0;h<a.length;h++){var m=a[h],k=Math.max(d+b.log2(m.minzoom),c),p=Math.min(d+b.log2(m.maxzoom),25);if(!(k>=p)){var n=m.tl,l=m.tr,q=m.bl,u=m.br,G=m.labelAngle,y=m.anchor,I=m.mosaicRect;this._glyphBufferDataStorage.has(m.page)||this._glyphBufferDataStorage.set(m.page,[]);this._glyphBufferDataStorage.get(m.page).push({glyphAnchor:[y.x,y.y],tl:[n.x,n.y],tr:[l.x,
l.y],bl:[q.x,q.y],br:[u.x,u.y],xmin:I.x,ymin:I.y,xmax:I.x+I.width,ymax:I.y+I.height,labelAngle:G,minLod:k,maxLod:p,placementLod:c,ddValues:g})}}},g._findAnchors=function(a,d,g){d+=g;for(var h=0,m=a.length-1,k=0;m>k;k++)h+=y.Point.distance(a[k],a[k+1]);k=g||d;if(k*=.5,k>=h)return[];g=k/h;d=h/Math.max(Math.round(h/d),1);for(var h=0,m=-d/2,p=[],n=a.length-1,k=0;n>k;k++){for(var l=a[k],q=a[k+1],u=q.x-l.x,G=q.y-l.y,C=Math.sqrt(u*u+G*G),F=void 0;h+C>m+d;){var m=m+d,N=(m-h)/C,K=b.interpolate(l.x,q.x,N),
N=b.interpolate(l.y,q.y,N);void 0===F&&(F=Math.atan2(G,u));p.push(new c.Anchor(K,N,F,k,g))}h+=C}return p},g.deviation=function(a,c,b){return Math.atan2((c.x-a.x)*(b.y-c.y)-(c.y-a.y)*(b.x-c.x),(c.x-a.x)*(b.x-c.x)+(c.y-a.y)*(b.y-c.y))},g._honorsTextMaxAngle=function(a,c,b,d,g){var h=0;b/=2;for(var m=new y.Point(c.x,c.y),k=c.segment+1;h>-b;){if(--k,0>k)return!1;h-=y.Point.distance(a[k],m);m=a[k]}h+=y.Point.distance(a[k],a[k+1]);c=[];for(var m=0,p=a.length;b>h;){var n=a[k],l=void 0;do{if(++k,k===p)return!1;
l=a[k]}while(l.isEqual(n));var q=k,x=void 0;do{if(++q,q===p)return!1;x=a[q]}while(x.isEqual(l));n=this.deviation(n,l,x);c.push({deviation:n,distToAnchor:h});for(m+=n;h-c[0].distToAnchor>g;)m-=c.shift().deviation;if(Math.abs(m)>d)return!1;h+=y.Point.distance(l,x)}return!0},g._smoothVertices=function(a,c){if(!(0>=c)){var b=a.length;if(!(3>b)){var d=[],g=0;d.push(0);for(var h=1;b>h;h++)g+=y.Point.distance(a[h],a[h-1]),d.push(g);c=Math.min(c,.2*g);g=[];g.push(a[0].x);g.push(a[0].y);var k=a[b-1].x,m=a[b-
1].y,h=y.Point.sub(a[0],a[1]);h.normalize();a[0].x+=c*h.x;a[0].y+=c*h.y;h.assignSub(a[b-1],a[b-2]);h.normalize();a[b-1].x+=c*h.x;a[b-1].y+=c*h.y;for(h=1;b>h;h++)d[h]+=c;d[b-1]+=c;for(var p=.5*c,h=1;b-1>h;h++){for(var n=0,l=0,q=0,u=h-1;0<=u&&!(d[u+1]<d[h]-p);u--){var C=p+d[u+1]-d[h],F=d[u+1]-d[u],K=d[h]-d[u]<p?1:C/F;if(1E-6>Math.abs(K))break;var T=K*K,v=K*C-.5*T*F,E=K*F/c,A=a[u+1],J=a[u].x-A.x,L=a[u].y-A.y,n=n+E/v*(A.x*K*C+.5*T*(C*J-F*A.x)-T*K*F*J/3),l=l+E/v*(A.y*K*C+.5*T*(C*L-F*A.y)-T*K*F*L/3),q=
q+E}for(u=h+1;b>u&&!(d[u-1]>d[h]+p);u++){C=p-d[u-1]+d[h];F=d[u]-d[u-1];K=d[u]-d[h]<p?1:C/F;if(1E-6>Math.abs(K))break;T=K*K;v=K*C-.5*T*F;E=K*F/c;A=a[u-1];J=a[u].x-A.x;L=a[u].y-A.y;n+=E/v*(A.x*K*C+.5*T*(C*J-F*A.x)-T*K*F*J/3);l+=E/v*(A.y*K*C+.5*T*(C*L-F*A.y)-T*K*F*L/3);q+=E}g.push(n/q);g.push(l/q)}g.push(k);g.push(m);for(u=h=0;b>h;h++)a[h].x=g[u++],a[h].y=g[u++]}}},g._bidiEngine=new d,g}(u)})},"esri/views/vectorTiles/Placement":function(){define(["require","exports","../2d/engine/webgl/Geometry","./GeometryUtils",
"./Conflict"],function(F,a,l,C,u){Object.defineProperty(a,"__esModule",{value:!0});F=function(){return function(a,c,k,g,n){void 0===k&&(k=0);void 0===g&&(g=-1);void 0===n&&(n=b);this.x=a;this.y=c;this.angle=k;this.segment=g;this.minzoom=n}}();a.Anchor=F;F=function(){return function(a,c,b,g){this.glyph=a;this.x=c;this.y=b;this.glyphItem=g}}();a.ShapedGlyph=F;var y=function(){return function(a,c,k,g,n,h,m){void 0===n&&(n=!1);void 0===h&&(h=b);void 0===m&&(m=C.C_INFINITY);this.anchor=a;this.labelAngle=
c;this.glyphAngle=k;this.page=g;this.upsideDown=n;this.minzoom=h;this.maxzoom=m}}(),q=function(){return function(a,c,b,g,n,h,m,l,q,u){this.tl=a;this.tr=c;this.bl=b;this.br=g;this.mosaicRect=n;this.labelAngle=h;this.anchor=m;this.minzoom=l;this.maxzoom=q;this.page=u}}();a.PlacedSymbol=q;var c=function(){return function(a,c){this.footprint=a;this.shapes=c}}();a.Placement=c;var b=.5;F=function(){function a(){this.mapAngle=0;this._conflictEngine=new u.ConflictEngine}return a.prototype.reset=function(){this._conflictEngine.reset()},
a.prototype.setAngle=function(a){this.mapAngle=a;this._conflictEngine.setAngle(a)},a.prototype.getIconPlacement=function(a,k,g,n,h,m,p){var d=g.width/(g.sdfRatio*g.pixelRatio),x=g.height/(g.sdfRatio*g.pixelRatio);h=m.offset[0]-d/2;var r=m.offset[1]-x/2,d=h+d,x=r+x,y=g.rect,w=(g.sdf?17:2)/g.sdfRatio,G=h-w,B=r-w,D=G+y.width/(g.pixelRatio*g.sdfRatio),F=B+y.height/(g.pixelRatio*g.sdfRatio);g=new l.Point(G,B);w=new l.Point(D,F);F=new l.Point(G,F);B=new l.Point(D,B);D=m.rotate*C.C_DEG_TO_RAD;G=1===m.rotationAlignment;
if(0<=a.segment&&!G&&(D+=a.angle),0!==D){var R=Math.cos(D),Q=Math.sin(D);g.rotate(R,Q);w.rotate(R,Q);F.rotate(R,Q);B.rotate(R,Q)}R=8*m.padding;Q=new l.Point(a.x,a.y);a=new u.Footprint(this.mapAngle,R,G);a.addBox(Q,new u.Box(h,r,d,x),n,D,k,b,C.C_INFINITY);k=new q(g,B,F,w,y,0,Q,b,C.C_INFINITY,0);k=new c(a,[k]);n=b;return m.allowOverlap||(n=this._conflictEngine.getMinZoom(k.footprint,n,p,G)),a.minzoom=n,k},a.prototype.getTextPlacement=function(a,k,g,n,h,m,p,F){for(var d,r=new l.Point(a.x,a.y),G=p.rotate*
C.C_DEG_TO_RAD,w=0===p.rotationAlignment,z=p.keepUpright,B=b,D=!w,I=D?0:a.angle,R=0<=a.segment&&w,Q=new u.Footprint(this.mapAngle,8*p.padding,D),N=[],K=!R,T=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,E=T,A=v,J=R?z:w&&z,L=0;L<n.length;L++){var S=n[L],M=S.glyphItem;if(M&&!M.rect.isEmpty){var V=M.rect,da=M.metrics,ca=M.page;K&&(d&&d!==S.y&&(Q.addBox(r,new u.Box(T,E,v,A),h,G,k,b,C.C_INFINITY),T=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,E=T,A=v),d=S.y);var fa=[];if(R){if(M=(g.x+S.x+
da.left-4+.5*M.metrics.width)*h,B=this._placeGlyph(a,B,M,m,a.segment,1,ca,fa),z&&(B=this._placeGlyph(a,B,M,m,a.segment,-1,ca,fa)),2<=B)break}else fa.push(new y(r,I,I,ca)),w&&z&&fa.push(new y(r,I+C.C_PI,I+C.C_PI,ca,!0));for(var ca=S.x+g.x+da.left,S=S.y+g.y-da.top,M=ca+da.width,da=S+da.height,ga=new l.Point(ca-4,S-4),ea=new l.Point(ga.x+V.width,ga.y+V.height),ba=new l.Point(ga.x,ea.y),ha=new l.Point(ea.x,ga.y),X=0;X<fa.length;X++){var Y=fa[X],ka=ga.clone(),la=ba.clone(),ma=ha.clone(),na=ea.clone(),
ja=S,oa=da,Z=Y.glyphAngle+G;if(0!==Z){var O=Math.cos(Z),W=Math.sin(Z);ka.rotate(O,W);na.rotate(O,W);la.rotate(O,W);ma.rotate(O,W)}N.push(new q(ka,ma,la,na,V,Y.labelAngle,Y.anchor,Y.minzoom,Y.maxzoom,Y.page));(!J||this._legible(Y.labelAngle))&&(K?(T>ca&&(T=ca),E>ja&&(E=ja),M>v&&(v=M),oa>A&&(A=oa)):2>Y.minzoom&&Q.addBox(Y.anchor,new u.Box(ca,ja,M,oa),h,Z,k,Y.minzoom,Y.maxzoom))}}}if(2<=B)return null;K&&Q.addBox(r,new u.Box(T,E,v,A),h,G,k,b,C.C_INFINITY);a=new c(Q,N);return p.allowOverlap||(B=this._conflictEngine.getMinZoom(a.footprint,
B,F,D)),Q.minzoom=B,a},a.prototype.add=function(a){this._conflictEngine.add(a.footprint)},a.prototype._legible=function(a){a=C.radToByte(a);return 65>a||193<=a},a.prototype._placeGlyph=function(a,c,b,p,h,m,q,u){var d=0>m?C.positiveMod(a.angle+C.C_PI,C.C_2PI):a.angle,g=this._legible(d),k=0;0>b&&(m*=-1,b*=-1,k=C.C_PI);0<m&&++h;a=new l.Point(a.x,a.y);var n=p[h],G=C.C_INFINITY;if(p.length<=h)return G;for(;;){var B=n.x-a.x,D=n.y-a.y,F=Math.sqrt(B*B+D*D),I=Math.max(b/F,c),B=C.positiveMod(Math.atan2(D/F,
B/F)+k,C.C_2PI);if(u.push(new y(a,d,B,q,g,I,G)),c>=I)return I;a=n.clone();do{if(h+=m,p.length<=h||0>h)return I;n=p[h]}while(a.isEqual(n));G=n.x-a.x;B=n.y-a.y;D=Math.sqrt(G*G+B*B);G*=F/D;B*=F/D;a.x-=G;a.y-=B;G=I}},a}();a.PlacementEngine=F})},"esri/views/vectorTiles/Conflict":function(){define(["require","exports","../2d/engine/webgl/Geometry","./GeometryUtils"],function(F,a,l,C){Object.defineProperty(a,"__esModule",{value:!0});F=function(){function a(a,b,p,d){this.left=a;this.top=b;this.right=p;this.bottom=
d}return a.prototype.clone=function(){return new a(this.left,this.top,this.right,this.bottom)},a.prototype.move=function(a,b){this.left+=a;this.top+=b;this.right+=a;this.bottom+=b},a.prototype.rotate=function(a,b){var c=this.left,d=this.right,k=this.top,g=this.bottom,n=c*a-k*b,h=c*b+k*a,m=d*a-k*b,k=d*b+k*a,l=c*a-g*b,c=c*b+g*a,q=d*a-g*b;a=d*b+g*a;this.left=Math.min(n,m,l,q);this.top=Math.min(h,k,c,a);this.right=Math.max(n,m,l,q);this.bottom=Math.max(h,k,c,a)},a.overlaps=function(a,b){return a.right>
b.left&&a.left<b.right&&a.bottom>b.top&&a.top<b.bottom},a}();a.Box=F;var u=function(){function a(a,b,p,d){this.anchor=a;this.corners=b;this.minzoom=p;this.maxzoom=d}return a.prototype.left=function(){return this.corners[0].x},a.prototype.right=function(){return this.corners[2].x},a.prototype.top=function(){return this.corners[1].y},a.prototype.bottom=function(){return this.corners[3].y},a}();a.Obstacle=u;F=function(){function a(a,b,p){this.obstacles=[];this.mapAngle=a;this.padding=b;this.isScreenAligned=
p;this.minzoom=y}return a.prototype.addBox=function(a,b,p,d,k,g,n){var c=b.left*p-this.padding,m=b.top*p-this.padding,q=b.right*p+this.padding;b=b.bottom*p+this.padding;c=[new l.Point(c,m),new l.Point(q,m),new l.Point(q,b),new l.Point(c,b)];0!==this.mapAngle&&(m=Math.cos(this.mapAngle),q=Math.sin(this.mapAngle),a=a.clone(),a.rotate(m,q));if(this.isScreenAligned||(d+=this.mapAngle),0!==d){m=Math.cos(d);q=Math.sin(d);c[0].rotate(m,q);c[1].rotate(m,q);c[2].rotate(m,q);c[3].rotate(m,q);d=0;for(m=1;4>
m;m++)c[m].x<c[d].x?d=m:c[m].x===c[d].x&&c[m].y<c[d].y&&(d=m);if(d){q=[];for(m=0;4>m;m++)q.push(c[(m+d)%4]);c=q}}if(k)for(d=0,m=c;d<m.length;d++)m[d].move(k[0],k[1]);this.obstacles.push(new u(a,c,g,n))},a}();a.Footprint=F;var y=.5;F=function(){function a(){this._grid=[]}return a.prototype.setAngle=function(a){},a.prototype.reset=function(){this._grid=[]},a.prototype.add=function(c){var b=this._grid,p=0;for(c=c.obstacles;p<c.length;p++)for(var d=c[p],k=d.anchor,g=a._gridClamp(Math.min(d.left()+k.x,
k.x)),n=a._gridClamp(Math.max(d.right()+k.x,k.x)),h=a._gridClamp(Math.min(d.top()+k.y,k.y)),k=a._gridClamp(Math.max(d.bottom()+k.y,k.y));k>=h;h++)for(var m=g;n>=m;m++){var l=b[16*h+m];l||(l=b[16*h+m]=[]);l.push(d)}},a.prototype.getMinZoom=function(c,b,p,d){if(0===c.obstacles.length)return C.C_INFINITY;p=this._grid;d=0;for(c=c.obstacles;d<c.length;d++)for(var k=c[d],g=k.anchor,n=a._gridClamp(Math.min(k.left()+g.x,g.x)),h=a._gridClamp(Math.max(k.right()+g.x,g.x)),m=a._gridClamp(Math.min(k.top()+g.y,
g.y)),g=a._gridClamp(Math.max(k.bottom()+g.y,g.y));g>=m;m++)for(var l=n;h>=l;l++){var q=p[16*m+l];if(q)for(var u=0;u<q.length;u++){var r=q[u];if(!(k.minzoom>=r.maxzoom||r.minzoom>=k.maxzoom)&&(b=a._calcPlacementZoom(k,r,b),2<=b))return C.C_INFINITY}}return 2>b?b:C.C_INFINITY},a._gridClamp=function(a){return C.clamp(a>>9,-7,8)},a._calcPlacementZoom=function(c,b,p){var d=b.anchor.x-c.anchor.x;if(0===d&&(c.right()<b.left()||b.right()<c.left()))return p;var k=b.anchor.y-c.anchor.y;if(0===k&&(c.bottom()<
b.top()||b.bottom()<c.top()))return p;var g=C.C_INFINITY;if(0!==d){var n=(0<d?c.right()-b.left():c.left()-b.right())/d;g>n&&(g=n);d=0<d?a._calcExtZoomX(c,b,n):a._calcExtZoomX(b,c,n);g>d&&(g=d)}0!==k&&(d=(0<k?c.bottom()-b.top():c.top()-b.bottom())/k,g>d&&(g=d),k=0<k?a._calcExtZoomY(c,b,d):a._calcExtZoomY(b,c,d),g>k&&(g=k));return g<c.minzoom||g<b.minzoom?p:(g=Math.min(g,c.maxzoom,b.maxzoom),p>g&&(g=p),g)},a._calcExtZoomX=function(a,b,p){var c,k,g,n;if(b.anchor.y+b.corners[0].y/p>a.anchor.y+a.corners[2].y/
p){var h=a.corners[2].x-a.corners[3].x,m=a.corners[2].y-a.corners[3].y,l=b.corners[1].x-b.corners[0].x,q=b.corners[1].y-b.corners[0].y;0<=h*q-m*l?a.anchor.y+a.corners[3].y/p<b.anchor.y+b.corners[0].y/p?(c=a.corners[3],k=b.corners[0],g=b.corners[1],n=1):(c=b.corners[0],k=a.corners[3],g=a.corners[2],n=-1):a.anchor.y+a.corners[2].y/p>b.anchor.y+b.corners[1].y/p?(c=a.corners[2],k=b.corners[0],g=b.corners[1],n=1):(c=b.corners[1],k=a.corners[3],g=a.corners[2],n=-1)}else h=a.corners[2].x-a.corners[1].x,
m=a.corners[2].y-a.corners[1].y,l=b.corners[3].x-b.corners[0].x,q=b.corners[3].y-b.corners[0].y,0>h*q-m*l?a.anchor.y+a.corners[1].y/p>b.anchor.y+b.corners[0].y/p?(c=a.corners[1],k=b.corners[0],g=b.corners[3],n=1):(c=b.corners[0],k=a.corners[1],g=a.corners[2],n=-1):a.anchor.y+a.corners[2].y/p<b.anchor.y+b.corners[3].y/p?(c=a.corners[2],k=b.corners[0],g=b.corners[3],n=1):(c=b.corners[3],k=a.corners[1],g=a.corners[2],n=-1);p=g.x-k.x;g=g.y-k.y;return n*((c.y-k.y)*p-(c.x-k.x)*g)/((a.anchor.x-b.anchor.x)*
g-(a.anchor.y-b.anchor.y)*p)},a._calcExtZoomY=function(a,b,p){var c,k,g,n;if(b.anchor.x+b.corners[1].x/p>a.anchor.x+a.corners[3].x/p){var h=a.corners[3].x-a.corners[2].x,m=a.corners[3].y-a.corners[2].y,l=b.corners[0].x-b.corners[1].x,q=b.corners[0].y-b.corners[1].y;0>h*q-m*l?a.anchor.x+a.corners[2].x/p<b.anchor.x+b.corners[1].x/p?(c=a.corners[2],k=b.corners[1],g=b.corners[0],n=1):(c=b.corners[1],k=a.corners[2],g=a.corners[3],n=-1):a.anchor.x+a.corners[3].x/p>b.anchor.x+b.corners[0].x/p?(c=a.corners[3],
k=b.corners[1],g=b.corners[0],n=1):(c=b.corners[0],k=a.corners[2],g=a.corners[3],n=-1)}else h=a.corners[3].x-a.corners[0].x,m=a.corners[3].y-a.corners[0].y,l=b.corners[2].x-b.corners[1].x,q=b.corners[2].y-b.corners[1].y,0<h*q-m*l?a.anchor.x+a.corners[0].x/p>b.anchor.x+b.corners[1].x/p?(c=a.corners[0],k=b.corners[1],g=b.corners[2],n=1):(c=b.corners[1],k=a.corners[0],g=a.corners[3],n=-1):a.anchor.x+a.corners[3].x/p<b.anchor.x+b.corners[2].x/p?(c=a.corners[3],k=b.corners[1],g=b.corners[2],n=1):(c=b.corners[2],
k=a.corners[0],g=a.corners[3],n=-1);p=g.x-k.x;g=g.y-k.y;return n*((c.y-k.y)*p-(c.x-k.x)*g)/((a.anchor.x-b.anchor.x)*g-(a.anchor.y-b.anchor.y)*p)},a}();a.ConflictEngine=F})},"esri/views/vectorTiles/TextShaping":function(){define(["require","exports","./Placement"],function(F,a,l){return function(){function a(a,l,q,c,b,p,d,k){this._glyphItems=a;this._maxWidth=l;this._lineHeight=q;this._letterSpacing=c;this._offset=b;this._hAnchor=p;this._vAnchor=d;this._justify=k}return a.prototype.getShaping=function(a,
y){for(var q=this._letterSpacing,c=this._offset[0],b=this._offset[1],p=[],d=a.length,k=0;d>k;k++){for(var g=a.charCodeAt(k),n=void 0,h=0,m=this._glyphItems;h<m.length&&!(n=m[h][g]);h++);n&&(p.push(new l.ShapedGlyph(g,c,b,n)),c+=n.metrics.advance+q)}if(0<p.length){n=this._maxWidth;a=this._lineHeight;c=this._justify;b=p.length;g=d=q=0;if(0!==n)for(k=m=h=0;b>k;k++){var u=p[k];if(u.x-=m,y?u.y-=a*q:u.y+=a*q,u.x>n&&0<h){for(var C=p[h+1].x,g=Math.max(C,g),x=h+1;k>=x;x++)y?p[x].y-=a:p[x].y+=a,p[x].x-=C;c&&
this._applyJustification(p,d,h-1);d=h+1;h=0;m+=C;q++}32===u.glyph&&(h=k)}k=p[b-1];g=Math.max(g,k.x+k.glyphItem.metrics.advance);c&&this._applyJustification(p,d,b-1);k=(c-this._hAnchor)*g;c=(-this._vAnchor*(q+1)+.5)*a;y&&q&&(c+=q*a);for(y=0;y<p.length;y++)a=p[y],a.x+=k,a.y+=c}return p},a.prototype._applyJustification=function(a,l,q){for(var c=a[q],c=(c.x+c.glyphItem.metrics.advance)*this._justify;q>=l;l++)a[l].x-=c},a}()})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang","dojo/_base/declare",
"dojo/Stateful"],function(F,a,l){function C(a,b,d,f,e){var g=a;void 0===b&&(b=e.defInFormat);void 0===d&&(d=e.defOutFormat);void 0===f&&(f=e.defSwap);if(b!==d){var h,k=b.substring(0,1);h=b.substring(1,4);var m=d.substring(0,1),n=d.substring(1,4);"C"===h.charAt(0)&&(h=u(g),h="ltr"===h||"rtl"===h?h.toUpperCase():"L"===b.charAt(2)?"LTR":"RTL",b=k+h);"C"===n.charAt(0)&&(h=u(g),"rtl"===h?n="RTL":"ltr"===h?(g=g.split(""),g.reverse(),h=u(g.join("")),n=h.toUpperCase()):n="L"===d.charAt(2)?"LTR":"RTL",d=m+
n)}if(b===d)return a;m=b.substring(0,1);g=b.substring(1,4);k=d.substring(0,1);n=d.substring(1,4);e.inFormat=b;e.outFormat=d;e.swap=f;if("L"===m&&"VLTR"===d){if("LTR"===g)return e.dir=B,y(a,e);if("RTL"===g)return e.dir=D,y(a,e)}if("V"===m&&"V"===k)return e.dir="RTL"===g?D:B,c(a,e);if("L"===m&&"VRTL"===d)return e.dir="LTR"===g?B:D,a=y(a,e),c(a);if("VLTR"===b&&"LLTR"===d)return e.dir=B,y(a,e);if("V"===m&&"L"===k&&g!==n)return a=c(a),"RTL"===g?C(a,"LLTR","VLTR",f,e):C(a,"LRTL","VRTL",f,e);if("VRTL"===
b&&"LRTL"===d)return C(a,"LRTL","VRTL",f,e);if("L"===m&&"L"===k)return b=e.swap,e.swap=b.substr(0,1)+"N","RTL"===g?(e.dir=D,a=y(a,e),e.swap="N"+b.substr(1,2),e.dir=B,a=y(a,e)):(e.dir=B,a=y(a,e),e.swap="N"+b.substr(1,2),a=C(a,"VLTR","LRTL",e.swap,e)),a}function u(a){return(a=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(a))?"z">=a[0]?"ltr":"rtl":""}function y(a,c){a=a.split("");var b=[];q(a,b,c);if(0!==c.hiLevel&&c.swap.substr(0,1)!==c.swap.substr(1,2))for(var e=
0;e<a.length;e++)if(1===b[e]){var f=e,g;b:{g=a[e];for(var h=void 0,k=0,m=Q.length-1;k<=m;)if(h=Math.floor((k+m)/2),g<Q[h][0])m=h-1;else if(g>Q[h][0])k=h+1;else{g=Q[h][1];break b}}a[f]=g}d(2,a,b,c);d(1,a,b,c);r=b;return a.join("")}function q(a,c,b){var d=a.length,e=b.dir?fa:ca,f=null,g=null,h=null,f=0,g=g=null,m=-1,n=g=null,p=[],l=[];b.hiLevel=b.dir;b.lastArabic=!1;b.hasUbatAl=!1;b.hasUbatB=!1;b.hasUbatS=!1;for(g=0;g<d;g++){var n=g,h=a[g].charCodeAt(0),q=qa[h>>8];p[n]=q<Z?q:ra[q-Z][h&255]}for(n=0;n<
d;n++){l[n]=g=k(a,p,l,n,b);f=e[f][g];g=f&240;f&=15;c[n]=h=e[f][w];if(0<g){if(16===g)for(g=m;g<n;g++)c[g]=1;m=-1}if(g=e[f][z])-1===m&&(m=n);else if(-1<m){for(g=m;g<n;g++)c[g]=h;m=-1}p[n]===Y&&(c[n]=0);b.hiLevel|=h}if(b.hasUbatS)for(a=0;a<d;a++)if(p[a]===ka)for(c[a]=b.dir,e=a-1;0<=e;e--)if(p[e]===ma)c[e]=b.dir;else break}function c(a,c){a=a.split("");if(c){var b=[];q(a,b,c);r=b}a.reverse();I.reverse();return a.join("")}function b(a){for(var c=0;c<V.length;c++)if(a>=V[c]&&a<=da[c])return!0;return!1}
function p(a,c,e,d){for(;c*e<d&&n(a[c]);)c+=e;return c*e<d&&b(a[c])?!0:!1}function d(a,c,b,e){if(!(e.hiLevel<a))if(1!==a||e.dir!==D||e.hasUbatB){e=c.length;for(var d=0,f,g,h;d<e;){if(b[d]>=a){for(f=d+1;f<e&&b[f]>=a;)f++;for(g=f-1;d<g;d++,g--)h=c[d],c[d]=c[g],c[g]=h,h=I[d],I[d]=I[g],I[g]=h;d=f}d++}}else c.reverse(),I.reverse()}function k(a,c,b,d,e){return{UBAT_L:function(){e.lastArabic=!1;return ga},UBAT_R:function(){e.lastArabic=!1;return ea},UBAT_ON:function(){return X},UBAT_AN:function(){return ha},
UBAT_EN:function(){return e.lastArabic?ha:ba},UBAT_AL:function(){e.lastArabic=!0;e.hasUbatAl=!0;return ea},UBAT_WS:function(){return X},UBAT_CS:function(){var a,f;if(1>d||d+1>=c.length||(a=b[d-1])!==ba&&a!==ha||(f=c[d+1])!==ba&&f!==ha)return X;e.lastArabic&&(f=ha);return f===a?f:X},UBAT_ES:function(){return(0<d?b[d-1]:Y)===ba&&d+1<c.length&&c[d+1]===ba?ba:X},UBAT_ET:function(){if(0<d&&b[d-1]===ba)return ba;if(e.lastArabic)return X;for(var a=d+1,f=c.length;a<f&&c[a]===na;)a++;return a<f&&c[a]===ba?
ba:X},UBAT_NSM:function(){if("VLTR"===e.inFormat){for(var f=c.length,g=d+1;g<f&&c[g]===ja;)g++;if(g<f&&(f=a[d],g=c[g],(1425<=f&&2303>=f||64286===f)&&(g===ea||g===la)))return ea}return 1>d||c[d-1]===Y?X:b[d-1]},UBAT_B:function(){e.lastArabic=!0;e.hasUbatB=!0;return e.dir},UBAT_S:function(){e.hasUbatS=!0;return X},UBAT_LRE:function(){e.lastArabic=!1;return X},UBAT_RLE:function(){e.lastArabic=!1;return X},UBAT_LRO:function(){e.lastArabic=!1;return X},UBAT_RLO:function(){e.lastArabic=!1;return X},UBAT_PDF:function(){e.lastArabic=
!1;return X},UBAT_BN:function(){return X}}[oa[c[d]]]()}function g(a,c){for(var b=0;b<v.length;b++)if(a===v[b])return c[b];return a}function n(a){return"\u064b"<=a&&"\u0655">=a?!0:!1}function h(a){if("L"===a)return"LTR";if("R"===a)return"RTL";if("C"===a)return"CLR";if("D"===a)return"CRL"}function m(a,c){for(var b=0;b<N.length;b++)if(a===N[b])return c[b];return a}function G(a,c,b,d){for(var e=0;e<a.length;e++)if(a[e]>c||!b&&a[e]===c)a[e]+=d}F.getObject("string",!0,dojox);F=a("dojox.string.BidiEngine",
l,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(a,c,e){this.sourceToTarget=[];this.targetToSource=[];if(!a)return"";var d=this.sourceToTarget,f=this.targetToSource,k=a.length;I=[];r=[];for(var l=0;l<k;l++)d[l]=l,f[l]=l,I[l]=l;if(!this.checkParameters(c,e))return a;c=this.inputFormat;e=this.outputFormat;var d=a,d=H,l=h(c.charAt(1)),f=h(e.charAt(1)),q="I"===c.charAt(0)?"L":c.charAt(0),k="I"===e.charAt(0)?"L":e.charAt(0),l=q+l,f=k+f,k=
c.charAt(2)+e.charAt(2);d.defInFormat=l;d.defOutFormat=f;d.defSwap=k;a=C(a,l,f,k,d);d=!1;if("R"===e.charAt(1))d=!0;else if("C"===e.charAt(1)||"D"===e.charAt(1))d=this.checkContextual(a);f=this.sourceToTarget=I;k=Array(f.length);for(l=0;l<f.length;l++)k[f[l]]=l;x=this.targetToSource=k;if(c.charAt(3)===e.charAt(3))d=a;else if("S"===e.charAt(3))if(c=d,e=!0,0===a.length)d=void 0;else{void 0===c&&(c=!0);void 0===e&&(e=!0);a=String(a);a=a.split("");var u=0,f=1,d=a.length;c||(u=a.length-1,f=-1,d=1);for(var k=
d,l=e,t=0,d=[],q=0;u*f<k;u+=f)if(b(a[u])||n(a[u])){var w;if(w="\u0644"===a[u])b:{for(var y=a,z=u+f,B=f,D=k;z*B<D&&n(y[z]);)z+=B;w=" ";if(z*B<D)for(w=y[z],y=0;y<N.length;y++)if(N[y]===w){w=!0;break b}w=!1}if(w){a[u]=0===t?m(a[u+f],K):m(a[u+f],T);u+=f;t=a;w=u;y=f;for(z=k;w*y<z&&n(t[w]);)w+=y;w*y<z&&(t[w]=" ");l&&(d[q]=u,q++);t=0}else{w=a[u];if(1===t){y=u;if(p(a,u+f,f,k))b:for(z=a[u],B=0;B<v.length;B++){if(z===v[B]){z=J[B];break b}}else z=g(a[u],A);a[y]=z}else!0===p(a,u+f,f,k)?a[u]=g(a[u],L):a[u]=g(a[u],
E);n(w)||(t=1);b:{for(y=0;y<S.length;y++)if(S[y]===w){w=!0;break b}w=!1}!0===w&&(t=0)}}else t=0;f="";for(k=0;k<a.length;k++){if(l=e){b:{for(l=0;l<d.length;l++)if(d[l]===k)break b;l=-1}l=-1<l}l?(G(x,k,!c,-1),I.splice(k,1)):f+=a[k]}d=f}else if(c=a,e=d,a=!0,0===c.length)d=void 0;else for(void 0===a&&(a=!0),void 0===e&&(e=!0),c=String(c),d="",f=[],f=c.split(""),k=0;k<c.length;k++)l=!1,"\ufe70"<=f[k]&&"\ufeff">f[k]?(q=c.charCodeAt(k),"\ufef5"<=f[k]&&"\ufefc">=f[k]?(e?(0<k&&a&&" "===f[k-1]?d=d.substring(0,
d.length-1)+"\u0644":(d+="\u0644",l=!0),d+=N[(q-65269)/2]):(d+=N[(q-65269)/2],d+="\u0644",k+1<c.length&&a&&" "===f[k+1]?k++:l=!0),l&&(G(x,k,!0,1),I.splice(k,0,I[k]))):d+=M[q-65136]):d+=f[k];this.sourceToTarget=I;this.targetToSource=x;this.levels=r;return d},_inputFormatSetter:function(a){if(!U.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=a},_outputFormatSetter:function(a){if(!U.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");
this.outputFormat=a},checkParameters:function(a,c){a?this.set("inputFormat",a):a=this.inputFormat;c?this.set("outputFormat",c):c=this.outputFormat;return a===c?!1:!0},checkContextual:function(a){a=u(a);if("ltr"!==a&&"rtl"!==a){try{a=document.dir.toLowerCase()}catch(sa){}"ltr"!==a&&"rtl"!==a&&(a="ltr")}return a},hasBidiChar:function(a){return R.test(a)}});var I=[],x=[],r=[],H={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,
hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},w=5,z=6,B=0,D=1,U=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,R=/[\u0591-\u06ff\ufb1d-\ufefc]/,Q=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]","["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],
["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],N=["\u0622","\u0623","\u0625","\u0627"],K=["\ufef5","\ufef7","\ufef9","\ufefb"],T=["\ufef6","\ufef8","\ufefa","\ufefc"],v="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),
E="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),A="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),
J="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),L="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),
S="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),M="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
V=["\u0621","\u0641"],da=["\u063a","\u064a"],ca=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],fa=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],ga=0,ea=1,ba=2,ha=3,X=4,Y=5,ka=6,la=7,ma=8,na=11,ja=12,oa="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),Z=100;a=ga;l=ea;var O=ba,W=ha,f=X,ia=Y,pa=ka,e=la,aa=ma,P=
na,t=ja,qa=[Z+0,a,a,a,a,Z+1,Z+2,Z+3,l,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,Z+4,f,f,f,a,f,a,f,a,f,f,f,a,a,f,f,a,a,a,a,a,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,a,a,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,a,a,f,f,a,a,f,f,a,a,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,
f,f,f,f,f,f,f,f,a,a,a,Z+5,e,e,Z+6,Z+7],ra=[[18,18,18,18,18,18,18,18,18,pa,ia,pa,aa,ia,18,18,18,18,18,18,18,18,18,18,18,18,18,18,ia,ia,ia,pa,aa,f,f,P,P,P,f,f,f,f,f,10,9,10,9,9,O,O,O,O,O,O,O,O,O,O,9,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,18,18,18,18,18,18,ia,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,f,P,P,P,P,f,f,f,f,a,f,f,18,f,f,P,P,O,O,f,a,f,f,f,O,a,f,f,f,f,f,a,a,
a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,a,a,a,a,a,a,a,a],[a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,a,a,a,a,a,a,a,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,a,f,f,f,f,f,f,f,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,
t,t,l,t,l,t,t,l,t,t,l,t,f,f,f,f,f,f,f,f,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,f,f,f,f,f,l,l,l,l,l,f,f,f,f,f,f,f,f,f,f,f],[W,W,W,W,f,f,f,f,e,P,P,e,9,e,f,f,t,t,t,t,t,t,t,t,t,t,t,e,f,f,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,W,W,W,W,W,W,W,W,W,W,P,W,W,e,e,e,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,
e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,t,W,f,t,t,t,t,t,t,e,e,t,t,f,t,t,t,t,e,e,O,O,O,O,O,O,O,O,O,O,e,e,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,f,e,e,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,f,f,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,
t,e,f,f,f,f,f,f,f,f,f,f,f,f,f,f,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,t,t,t,t,t,t,t,t,t,l,l,f,f,f,f,l,f,f,f,f,f],[aa,aa,aa,aa,aa,aa,aa,aa,aa,aa,aa,18,18,18,a,l,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,aa,ia,13,14,15,16,17,9,P,P,P,P,P,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,9,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,aa,18,18,18,18,18,f,f,f,f,f,18,18,18,18,18,18,O,a,f,f,O,O,O,O,O,O,10,10,f,f,f,a,O,O,O,O,O,O,O,O,O,O,10,10,f,f,f,f,a,a,a,a,a,a,a,
a,a,a,a,a,a,f,f,f,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],[a,a,a,a,a,a,a,f,f,f,f,f,f,f,f,f,f,f,f,a,a,a,a,a,f,f,f,f,f,l,t,l,l,l,l,l,l,l,l,l,l,10,l,l,l,l,l,l,l,l,l,l,l,l,l,f,l,l,l,l,l,f,l,f,l,l,f,l,l,f,l,l,l,l,l,l,l,l,l,l,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,
e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],[t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,t,t,t,t,t,t,t,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,9,f,9,f,f,9,f,f,f,f,f,f,f,f,f,P,f,f,10,10,f,f,f,f,f,P,P,f,f,f,f,f,e,e,e,e,e,f,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,
e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,f,f,18],[f,f,f,P,P,P,f,f,f,f,f,10,9,10,9,9,O,O,O,O,O,O,O,O,O,O,9,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,f,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,
a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,a,a,a,a,a,a,f,f,a,a,a,a,a,a,f,f,a,a,a,a,a,a,f,f,a,a,a,f,f,f,P,P,f,f,f,P,P,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f]];return F})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(F,a,l,C){return F("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(a){var l=this._attrPairNames;return l[a]?l[a]:l[a]=
{s:"_"+a+"Setter",g:"_"+a+"Getter"}},postscript:function(a){a&&this.set(a)},_get:function(a,l){return"function"===typeof this[l.g]?this[l.g]():this[a]},get:function(a){return this._get(a,this._getAttrNames(a))},set:function(a,l){if("object"===typeof a){for(var q in a)a.hasOwnProperty(q)&&"_watchCallbacks"!=q&&this.set(q,a[q]);return this}q=this._getAttrNames(a);var c=this._get(a,q);q=this[q.s];var b;"function"===typeof q?b=q.apply(this,Array.prototype.slice.call(arguments,1)):this[a]=l;if(this._watchCallbacks){var p=
this;C(b,function(){p._watchCallbacks(a,c,l)})}return this},_changeAttrValue:function(a,l){var q=this.get(a);this[a]=l;this._watchCallbacks&&this._watchCallbacks(a,q,l);return this},watch:function(a,y){var q=this._watchCallbacks;if(!q)var c=this,q=this._watchCallbacks=function(a,b,k,g){var d=function(d){if(d){d=d.slice();for(var g=0,h=d.length;g<h;g++)d[g].call(c,a,b,k)}};d(q["_"+a]);g||d(q["*"])};y||"function"!==typeof a?a="_"+a:(y=a,a="*");var b=q[a];"object"!==typeof b&&(b=q[a]=[]);b.push(y);a=
{};a.unwatch=a.remove=function(){var a=l.indexOf(b,y);-1<a&&b.splice(a,1)};return a}})})},"esri/views/2d/engine/webgl/TileClipper":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(F,a,l,C){Object.defineProperty(a,"__esModule",{value:!0});var u=function(){return function(a,c,b){this.ratio=a;this.x=c;this.y=b}}();F=function(){function a(a,b,l,d,k){void 0===d&&(d=8);void 0===k&&(k=8);this.lines=[];this.starts=[];this.pixelRatio=d;this.pixelMargin=k;this.tileSize=512*d;
this.dz=a;this.yPos=b;this.xPos=l}return a.prototype.setExtent=function(a){this.finalRatio=this.tileSize/a*(1<<this.dz);var c=this.pixelRatio*this.pixelMargin,c=c/this.finalRatio;a>>=this.dz;c>a&&(c=a);this.margin=c;this.xmin=a*this.xPos-c;this.ymin=a*this.yPos-c;this.xmax=this.xmin+a+2*c;this.ymax=this.ymin+a+2*c},a.prototype.reset=function(a){this.type=a;this.lines=[];this.starts=[];this.line=null;this.start=0},a.prototype.moveTo=function(a,b){this._pushLine();this._prevIsIn=this._isIn(a,b);this._moveTo(a,
b,this._prevIsIn);this._prevPt=new l.Point(a,b);this._firstPt=new l.Point(a,b);this._dist=0},a.prototype.lineTo=function(a,b){var c,d,k,g,n,h,m,q,y=this._isIn(a,b),x=new l.Point(a,b),r=l.Point.distance(this._prevPt,x);if(y)this._prevIsIn?this._lineTo(a,b,!0):(c=this._prevPt,d=x,k=this._intersect(d,c),this.start=this._dist+r*(1-this._r),this._lineTo(k.x,k.y,!0),this._lineTo(d.x,d.y,!0));else if(this._prevIsIn)d=this._prevPt,c=x,k=this._intersect(d,c),this._lineTo(k.x,k.y,!0),this._lineTo(c.x,c.y,!1);
else{b=this._prevPt;if(!(b.x<=this.xmin&&x.x<=this.xmin||b.x>=this.xmax&&x.x>=this.xmax||b.y<=this.ymin&&x.y<=this.ymin||b.y>=this.ymax&&x.y>=this.ymax))if(a=[],(b.x<this.xmin&&x.x>this.xmin||b.x>this.xmin&&x.x<this.xmin)&&(g=(this.xmin-b.x)/(x.x-b.x),q=b.y+g*(x.y-b.y),q<=this.ymin?h=!1:q>=this.ymax?h=!0:a.push(new u(g,this.xmin,q))),(b.x<this.xmax&&x.x>this.xmax||b.x>this.xmax&&x.x<this.xmax)&&(g=(this.xmax-b.x)/(x.x-b.x),q=b.y+g*(x.y-b.y),q<=this.ymin?h=!1:q>=this.ymax?h=!0:a.push(new u(g,this.xmax,
q))),(b.y<this.ymin&&x.y>this.ymin||b.y>this.ymin&&x.y<this.ymin)&&(g=(this.ymin-b.y)/(x.y-b.y),m=b.x+g*(x.x-b.x),m<=this.xmin?n=!1:m>=this.xmax?n=!0:a.push(new u(g,m,this.ymin))),(b.y<this.ymax&&x.y>this.ymax||b.y>this.ymax&&x.y<this.ymax)&&(g=(this.ymax-b.y)/(x.y-b.y),m=b.x+g*(x.x-b.x),m<=this.xmin?n=!1:m>=this.xmax?n=!0:a.push(new u(g,m,this.ymax))),0===a.length)n?h?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):h?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,
this.ymin,!0);else if(1<a.length&&a[0].ratio>a[1].ratio)this.start=this._dist+r*a[1].ratio,this._lineTo(a[1].x,a[1].y,!0),this._lineTo(a[0].x,a[0].y,!0);else for(this.start=this._dist+r*a[0].ratio,g=0;g<a.length;g++)this._lineTo(a[g].x,a[g].y,!0);this._lineTo(x.x,x.y,!1)}this._dist+=r;this._prevIsIn=y;this._prevPt=x},a.prototype.close=function(){var a,b;0<this.line.length&&(a=this._firstPt,b=this._prevPt,a.x===b.x&&a.y===b.y||this.lineTo(a.x,a.y),a=this.line,b=a.length,4<=b&&(a[0].x===a[1].x&&a[0].x===
a[b-2].x||a[0].y===a[1].y&&a[0].y===a[b-2].y)&&(a.pop(),a[0].x=a[b-2].x,a[0].y=a[b-2].y))},a.prototype.result=function(){return this._pushLine(),0===this.lines.length?null:(3===this.type&&y.simplify(this.margin*this.finalRatio,this.lines),this.lines)},a.prototype.resultWithStarts=function(){if(2!==this.type)throw Error("Only valid for lines");this._pushLine();var a=this.lines,b=a.length;if(0===b)return null;for(var l=[],d=0;b>d;d++)l.push({line:a[d],start:this.starts[d]||0});return l},a.prototype._isIn=
function(a,b){return a>=this.xmin&&a<=this.xmax&&b>=this.ymin&&b<=this.ymax},a.prototype._intersect=function(a,b){var c,d,k;if(b.x>=this.xmin&&b.x<=this.xmax)d=b.y<=this.ymin?this.ymin:this.ymax,k=(d-a.y)/(b.y-a.y),c=a.x+k*(b.x-a.x);else if(b.y>=this.ymin&&b.y<=this.ymax)c=b.x<=this.xmin?this.xmin:this.xmax,k=(c-a.x)/(b.x-a.x),d=a.y+k*(b.y-a.y);else{d=b.y<=this.ymin?this.ymin:this.ymax;c=b.x<=this.xmin?this.xmin:this.xmax;var g=(c-a.x)/(b.x-a.x),n=(d-a.y)/(b.y-a.y);n>g?(k=g,d=a.y+g*(b.y-a.y)):(k=
n,c=a.x+n*(b.x-a.x))}return this._r=k,new l.Point(c,d)},a.prototype._pushLine=function(){this.line&&(1===this.type?0<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):2===this.type?1<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):3===this.type&&3<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)));this.line=[];this.start=0},a.prototype._moveTo=function(a,b,p){3!==this.type?p&&(a=Math.round((a-(this.xmin+this.margin))*
this.finalRatio),b=Math.round((b-(this.ymin+this.margin))*this.finalRatio),this.line.push(new l.Point(a,b))):(p||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),b<this.ymin&&(b=this.ymin),b>this.ymax&&(b=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),b=Math.round((b-(this.ymin+this.margin))*this.finalRatio),this.line.push(new l.Point(a,b)),this._is_h=!1,this._is_v=!1)},a.prototype._lineTo=function(a,b,p){var c,k;if(3!==this.type)p?(a=Math.round((a-(this.xmin+this.margin))*
this.finalRatio),b=Math.round((b-(this.ymin+this.margin))*this.finalRatio),0<this.line.length&&(c=this.line[this.line.length-1],c.equals(a,b)))||this.line.push(new l.Point(a,b)):this.line&&0<this.line.length&&this._pushLine();else if(p||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),b<this.ymin&&(b=this.ymin),b>this.ymax&&(b=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),b=Math.round((b-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){c=this.line[this.line.length-
1];p=c.x===a;var g=c.y===b;p&&g||(this._is_h&&p?(c.x=a,c.y=b,k=this.line[this.line.length-2],this._is_h=k.x===a,this._is_v=k.y===b):this._is_v&&g?(c.x=a,c.y=b,k=this.line[this.line.length-2],this._is_h=k.x===a,this._is_v=k.y===b):(this.line.push(new l.Point(a,b)),this._is_h=p,this._is_v=g))}else this.line.push(new l.Point(a,b))},a}();a.TileClipper=F;F=function(){function a(){}return a.prototype.setExtent=function(a){this._ratio=4096===a?1:4096/a},a.prototype.reset=function(a){this.type=a;this.lines=
[];this.line=null},a.prototype.moveTo=function(a,b){this.line&&this.lines.push(this.line);this.line=[];var c=this._ratio;this.line.push(new l.Point(Math.round(a*c),Math.round(b*c)))},a.prototype.lineTo=function(a,b){var c=this._ratio;this.line.push(new l.Point(Math.round(a*c),Math.round(b*c)))},a.prototype.close=function(){var a=this.line;a&&!a[0].isEqual(a[a.length-1])&&a.push(a[0])},a.prototype.result=function(){return this.line&&this.lines.push(this.line),0===this.lines.length?null:(3===this.type&&
1!==this._ratio&&y.simplify(64,this.lines),this.lines)},a}();a.SimpleBuilder=F;var y=function(){function a(){}return a.simplify=function(c,b){if(b){var l=-c,d=4096+c,k=-c,g=4096+c;c=[];for(var n=[],h=b.length,m=0;h>m;++m){var q=b[m];if(q&&!(2>q.length))for(var u=q[0],x=void 0,r=q.length,y=1;r>y;++y)x=q[y],u.x===x.x&&(u.x<=l&&(u.y>x.y?(c.push(m),c.push(y),c.push(0),c.push(-1)):(n.push(m),n.push(y),n.push(0),n.push(-1))),u.x>=d&&(u.y<x.y?(c.push(m),c.push(y),c.push(1),c.push(-1)):(n.push(m),n.push(y),
n.push(1),n.push(-1)))),u.y===x.y&&(u.y<=k&&(u.x<x.x?(c.push(m),c.push(y),c.push(2),c.push(-1)):(n.push(m),n.push(y),n.push(2),n.push(-1))),u.y>=g&&(u.x>x.x?(c.push(m),c.push(y),c.push(3),c.push(-1)):(n.push(m),n.push(y),n.push(3),n.push(-1)))),u=x}0!==c.length&&0!==n.length&&(a.fillParent(b,n,c),a.fillParent(b,c,n),l=[],a.calcDeltas(l,n,c),a.calcDeltas(l,c,n),a.addDeltas(l,b))}},a.fillParent=function(a,b,l){for(var c=l.length,k=b.length,g=0;k>g;g+=4){for(var n=b[g],h=b[g+1],m=b[g+2],p=a[n][h-1],
n=a[n][h],h=8092,q=-1,u=0;c>u;u+=4)if(l[u+2]===m){var r=l[u],y=l[u+1],w=a[r][y-1],r=a[r][y];switch(m){case 0:case 1:C.between(p.y,w.y,r.y)&&C.between(n.y,w.y,r.y)&&(w=Math.abs(r.y-w.y),h>w&&(h=w,q=u));break;case 2:case 3:C.between(p.x,w.x,r.x)&&C.between(n.x,w.x,r.x)&&(w=Math.abs(r.x-w.x),h>w&&(h=w,q=u))}}b[g+3]=q}},a.calcDeltas=function(c,b,l){for(var d=b.length,k=0;d>k;k+=4){var g=a.calcDelta(k,b,l,[]);c.push(b[k]);c.push(b[k+1]);c.push(b[k+2]);c.push(g)}},a.calcDelta=function(c,b,l,d){c=b[c+3];
if(-1===c)return 0;var k=d.length;return 1<k&&d[k-2]===c?0:(d.push(c),a.calcDelta(c,l,b,d)+1)},a.addDeltas=function(a,b){for(var c=a.length,d=0,k=0;c>k;k+=4){var g=a[k+3];g>d&&(d=g)}for(k=0;c>k;k+=4){var l=b[a[k]],h=a[k+1],g=d-a[k+3];switch(a[k+2]){case 0:l[h-1].x-=g;l[h].x-=g;break;case 1:l[h-1].x+=g;l[h].x+=g;break;case 2:l[h-1].y-=g;l[h].y-=g;break;case 3:l[h-1].y+=g,l[h].y+=g}}a=b.length;for(c=0;a>c;++c)l=b[c],!l||2>l.length||l[l.length-1].x!==l[0].x&&l[l.length-1].y!==l[0].y&&l.push(l[0])},a}()})},
"esri/views/2d/engine/webgl/GeometryUtils":function(){define(["require","exports"],function(F,a){function l(a,l){return a%=l,0<=a?a:a+l}Object.defineProperty(a,"__esModule",{value:!0});a.C_INFINITY=Number.POSITIVE_INFINITY;a.C_PI=Math.PI;a.C_2PI=2*a.C_PI;a.C_PI_BY_2=a.C_PI/2;a.C_RAD_TO_256=128/a.C_PI;a.C_256_TO_RAD=a.C_PI/128;a.C_DEG_TO_256=256/360;a.C_DEG_TO_RAD=a.C_PI/180;a.C_SQRT2=1.414213562;a.C_SQRT2_INV=1/a.C_SQRT2;var C=1/Math.LN2;a.positiveMod=l;a.radToByte=function(u){return l(u*a.C_RAD_TO_256,
256)};a.degToByte=function(u){return l(u*a.C_DEG_TO_256,256)};a.log2=function(a){return Math.log(a)*C};a.sqr=function(a){return a*a};a.clamp=function(a,l,q){return Math.min(Math.max(a,l),q)};a.interpolate=function(a,l,q){return a*(1-q)+l*q};a.between=function(a,l,q){return a>=l&&q>=a||a>=q&&l>=a}})},"*noref":1}});
define("require exports dojo/Deferred ../../core/promiseUtils ./WorkerTile ./style/StyleRepository".split(" "),function(F,a,l,C,u,y){return function(){function a(){this._tiles=new Map;this._spriteInfo={};this._glyphInfo={}}return a.prototype.reset=function(){var a=new l;this._spriteInfo={};this._glyphInfo={};var b=this._tiles;return b.forEach(function(a){return a.setObsolete()}),b.clear(),a.resolve(),a.promise},a.prototype.getLayers=function(){return this._layers},a.prototype.setLayers=function(a){return this._layers=
(new y(a)).layers,C.resolve({data:""})},a.prototype.getTile=function(a,b){var c=this,d=a.key,k=u.pool.acquire();k.initialize(a.key,a.refKey,this,a.rotation);var g=a.cacheTile;return b.invoke("fetchTileData",a.refKey).then(function(a){return k.setDataAndParse(a.protobuff,b).then(function(a){return g&&6!==k.status&&c._tiles.set(d,k),a}).otherwise(function(a){return k.setObsolete(),u.pool.release(k),c._tiles["delete"](k.tileKey),C.reject(a)})}).otherwise(function(a){return k.setObsolete(),c._tiles.has(k.tileKey)&&
c._tiles["delete"](k.tileKey),C.reject(a)}).always(function(a){return g||u.pool.release(k),a})},a.prototype.update=function(a){var b=this._tiles.get(a.key);return b?b.updateSymbols(a.rotation):C.reject()},a.prototype.destructTileData=function(a){return this._tiles.has(a.key)&&(u.pool.release(this._tiles.get(a.key)),this._tiles["delete"](a.key)),C.resolve()},a.prototype.fetchSprites=function(a,b){var c=[],d=this._spriteInfo;return a.forEach(function(a){void 0===d[a]&&c.push(a)}),0===c.length?C.resolve():
b.invoke("getSprites",{sprites:c}).then(function(a){a=a.spriteItems;for(var b in a)d[b]=a[b]})},a.prototype.getSpriteItems=function(){return this._spriteInfo},a.prototype.fetchGlyphs=function(a,b,l,d){var c=[],g=this._glyphInfo[b];return g?l.forEach(function(a){g[a]||c.push(a)}):(g=this._glyphInfo[b]=[],l.forEach(function(a){return c.push(a)})),0===c.length?C.resolve():d.invoke("getGlyphs",{tileID:a,font:b,codePoints:c}).then(function(a){a=a.glyphItems;for(var b in a)g[b]=a[b]})},a.prototype.getGlyphItems=
function(a){return this._glyphInfo[a]},a}()});