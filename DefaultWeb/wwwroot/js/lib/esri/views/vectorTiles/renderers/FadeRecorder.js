//>>built
define(["require","exports","../../../core/now"],function(g,h,k){Object.defineProperty(h,"__esModule",{value:!0});g=(function(){return function(f,a){this.level=f;this.now=a}}(),function(){return function(f,a,d,c){this.fadeSpeed=f;this.minfadeLevel=a;this.maxfadeLevel=d;this.fadeChange=c}}());h.FadeProperties=g;g=function(){function f(a){void 0===a&&(a=300);this._levelSnapshots=[];this._duration=a}return f.prototype.recordLevel=function(a){var d=k(),c=this._levelSnapshots;0===c.length&&(c.push({level:a,
now:0}),c.push({level:a,now:0}));2!==c.length&&c[0].level===a||c.push({level:a,now:d})},f.prototype.needsRedraw=function(){if(0===this._levelSnapshots.length)return!1;for(var a=this._duration,d=this._levelSnapshots,c=d.length,b=d[c-1],e=-1;c>e+1&&d[e+1].now+a<b.now;)e++;for(0>e&&(e=0);c>e;e++)if(d[e].level!==b.level)return!0;return!1},f.prototype.getFadeValues=function(a){void 0===a&&(a=!1);for(var d=this._duration,c=k(),b=this._levelSnapshots;3<b.length&&b[1].now+d<c;)b.shift();b[1].now+d<c&&(b[0].level=
b[1].level);var e=b[0].level,f=b[b.length-1],g=f.level,h=Math.min(e,g),e=Math.max(e,g),b=(f.level-b[1].level)/((f.now-b[1].now)/d),d=(c-f.now)/d*b;return a?{fadeSpeed:0,minfadeLevel:h,maxfadeLevel:e,fadeChange:0}:{fadeSpeed:b,minfadeLevel:h,maxfadeLevel:e,fadeChange:d}},f}();h.FadeRecorder=g});