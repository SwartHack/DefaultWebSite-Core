//>>built
define(["require","exports","../../../Color","../GeometryUtils"],function(m,n,h,l){return function(){function b(a,c,d){this.isDataDriven=!1;switch(c.type){case "number":a=!0;break;case "color":a=!0;d=b._parseColor(d);break;case "array":a="number"===c.value;break;default:a=!1}var g=d.stops&&0<d.stops.length;if(this.isDataDriven=!!d.property,this.isDataDriven)if(g)switch(d.type){case "identity":this.getValue=this._buildIdentity(d,c);break;case "categorical":this.getValue=this._buildCategorical(d,c);
break;default:a&&"interval"===d.type&&(a=!1),a?this.getValue=this._buildInterpolate(d,c):this.getValue=this._buildInterval(d,c)}else this.getValue=this._buildIdentity(d,c);else g?a?this.getValue=this._buildZoomInterpolate(d):this.getValue=this._buildZoomInterval(d):this.getValue=this._buildSimple(d)}return b.prototype._buildSimple=function(a){return function(){return a}},b.prototype._buildIdentity=function(a,c){return function(d,g){var e;return g&&(e=g.values[a.property],"color"===c.type&&(e=b._parseColor(e))),
void 0!==e?e:void 0!==a["default"]?a["default"]:c["default"]}},b.prototype._buildCategorical=function(a,c){var d=this;return function(g,e){var b;return e&&(b=e.values[a.property]),b=d._categorical(b,a.stops),void 0!==b?b:void 0!==a["default"]?a["default"]:c["default"]}},b.prototype._buildInterval=function(a,c){var d=this;return function(g,e){var b;return e&&(b=e.values[a.property]),"number"==typeof b?d._interval(b,a.stops):void 0!==a["default"]?a["default"]:c["default"]}},b.prototype._buildInterpolate=
function(a,c){var d=this;return function(g,e){var b;return e&&(b=e.values[a.property]),"number"==typeof b?d._interpolate(b,a.stops,a.base||1):void 0!==a["default"]?a["default"]:c["default"]}},b.prototype._buildZoomInterpolate=function(a){var c=this;return function(d){return c._interpolate(d,a.stops,a.base||1)}},b.prototype._buildZoomInterval=function(a){var c=this;return function(d){return c._interval(d,a.stops)}},b.prototype._categorical=function(a,c){for(var d=c.length,b=0;d>b;b++)if(c[b][0]===
a)return c[b][1]},b.prototype._interval=function(a,b){for(var d=b.length,c=0,e=0;d>e&&b[e][0]<=a;e++)c=e;return b[c][1]},b.prototype._interpolate=function(a,b,d){for(var c,e,h=b.length,f=0;h>f;f++){var k=b[f];if(!(k[0]<=a)){e=k;break}c=k}if(c&&e){f=e[0]-c[0];a-=c[0];d=1===d?a/f:(Math.pow(d,a)-1)/(Math.pow(d,f)-1);if(Array.isArray(c[1])){c=c[1];e=e[1];a=[];for(f=0;f<c.length;f++)a.push(l.interpolate(c[f],e[f],d));return a}return l.interpolate(c[1],e[1],d)}return c?c[1]:e?e[1]:void 0},b._isEmpty=function(a){for(var c in a)if(a.hasOwnProperty(c))return!1;
return!0},b._parseColor=function(a){if(Array.isArray(a))return a;if("string"!=typeof a)return a&&a["default"]&&(a["default"]=b._parseColor(a["default"])),a&&a.stops&&(a.stops=a.stops.map(function(a){return[a[0],b._parseColor(a[1])]})),a;a=new h(a);if(!this._isEmpty(a))return h.toUnitRGBA(a)},b}()});