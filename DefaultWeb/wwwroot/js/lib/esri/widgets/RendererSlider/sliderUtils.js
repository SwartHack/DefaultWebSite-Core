//>>built
define("require ../../core/numberUtils dojo/i18n!./nls/RendererSlider dojo/_base/array dojo/_base/lang dojo/dom-style dojo/string dijit/Tooltip dojox/gfx".split(" "),function(B,t,v,h,x,f,u,z,A){return{histogramXAvgPadding:18,labelTopOffset:3,generateTransparentBackground:function(a,b,c,d){a=a.createRect({width:b,height:c}).setFill(d?this.getTransparentFill():null);return a.moveToBack(),a},getTransparentFill:function(){return{type:"pattern",x:0,y:0,width:16,height:16,src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgaGVpZ2h0PSIxNiIgd2lkdGg9IjE2Ij48cGF0aCBkPSJNMCAwIEw4IDAgTDggOCBMMCA4IFoiIGZpbGw9IiNjY2MiIC8+PHBhdGggZD0iTTAgMCBMOCAwIEw4IDggTDAgOCBaIiBmaWxsPSIjZmZmIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDgpIiAvPjxwYXRoIGQ9Ik0wIDAgTDggMCBMOCA4IEwwIDggWiIgZmlsbD0iI2NjYyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCw4KSIgLz48cGF0aCBkPSJNMCAwIEw4IDAgTDggOCBMMCA4IFoiIGZpbGw9IiNmZmYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgsMCkiIC8+PC9zdmc+"}},
generateHistogramSurface:function(a,b,c,d){a=A.createSurface(a,b,c);return f.set(a.rawNode,{overflow:"visible",display:"inline-block",left:d+"px"}),a.rawNode.setAttribute("class","esri-histogram-surface"),a},generateCountTooltips:function(a,b){var c,d=[];return c=h.map(a.bins,function(b){return"object"==typeof b?b.count:b}),c.reverse(),h.forEach(c,x.hitch(this,function(a,c){d.push(new z({connectId:[b.children[c].rawNode],label:u.substitute(v.count,{count:a})}))})),d},generateHistogram:function(a,
b,c,d,k){var g,n,l,e,m=a.createGroup();return m.rawNode.setAttribute("class","esri-histogram-group"),g=h.map(b.bins,function(b){return"object"==typeof b?b.count:b}),g.reverse(),n=a.getDimensions().height/g.length,h.forEach(g,x.hitch(this,function(b,a){l=0<b?(c-this.histogramXAvgPadding)*(b/Math.max.apply(Math,g)):0;e=m.createRect({width:l,height:n}).setFill("#aaa").setTransform(A.matrix.translate(0,n*a));e.rawNode.setAttribute("class","esri-histogram-bar");e.rawNode.setAttribute("shape-rendering",
"crispEdges")})),f.set(a.rawNode,{display:"inline-block",left:d+"px"}),k||m.setTransform({dx:c,dy:0,xx:-1,xy:0,yx:0,yy:1}),m},generateAvgLine:function(a,b,c,d,k,g,n){var l,e,m,h=a.rawNode.getAttribute("width"),w=a.rawNode.getAttribute("height");c=Math.round(c);return l=a.createLine({x1:k?0:14,y1:c,x2:k?h-this.histogramXAvgPadding+4:h,y2:c}).setStroke({color:"#667"}).moveToBack(),l.rawNode.setAttribute("shape-rendering","crispEdges"),e=a.createImage({x:k?h-this.histogramXAvgPadding+6:0,y:c-8,width:14,
height:18,src:B.toUrl("./xAvg.svg")}),g||(n?b=t.format(parseFloat(b.toFixed(2))).toString()+"%":(d=2>d?2:d,b=t.format(parseFloat(b.toFixed(d))).toString())),m=new z({connectId:[e.rawNode],label:u.substitute(v.statsAvg,{avg:b})}),c>w||0>c?(f.set(l.rawNode,"display","none"),f.set(e.rawNode,"display","none")):(f.set(l.rawNode,"display","block"),f.set(e.rawNode,"display","block")),{avgHandleLine:l,avgHandleImage:e,avgHandleTooltip:m}},getCombinedPrecision:function(a,b){var c=this.getPrecision(a),d=this.getPrecision(b);
return-10<a&&10>a&&-10<b&&10>b&&2>c&&2>d?2:c>d?c:d},getPrecision:function(a){if(isNaN(a))return 0;for(var b,c=1;Math.round(a*c)/c!==a;)c*=10;return b=Math.round(Math.log(c)/Math.LN10),20<b?20:b},_resetLabelPositions:function(a){h.forEach(a,function(b){b&&b.labelNode&&(f.set(b.labelNode,"top","3px"),b.labelNode._autoPositioned=!1)})},_autoPositionHandleLabels:function(a){var b=[];if(0!==a.length&&(this._resetLabelPositions(a),h.forEach(a,function(a,d){a&&a.labelNode&&b.push({index:d,handle:a,label:a.labelNode,
rect:a.labelNode.getBoundingClientRect()})}),0!==b.length))switch(b.length){case 1:break;case 2:this._autoPositionTwoHandles(a,b);break;case 3:this._autoPositionThreeHandles(a,b);break;default:this._autoPositionManyHandles(a,b)}},_autoPositionTwoHandles:function(a,b){var c,d,k,g;this.collisionCheck(b[0].rect,b[1].rect)&&(c=b[0].rect.top-b[1].rect.top,d=(b[0].rect.height-c)/2,k=this.labelTopOffset+d,g=this.labelTopOffset-d,f.set(b[0].label,"top",k+"px"),f.set(b[1].label,"top",g+"px"),b[0].label._autoPositioned=
!0,b[1].label._autoPositioned=!0)},_autoPositionThreeHandles:function(a,b){var c,d,k,g,n,l,e;if(h.forEach(b,x.hitch(this,function(a,h){(e=b[h-1])&&e.rect&&this.collisionCheck(a.rect,e.rect)&&(a.label._autoPositioned&&!e.label._autoPositioned?(c=e.rect.top-a.rect.top,k=a.rect.height,g=k-c+this.labelTopOffset,f.set(e.label,"top",g+"px"),e.label._autoPositioned=!0):!a.label._autoPositioned&&e.label._autoPositioned?(c=e.rect.top-a.rect.top,k=a.rect.height,g=-1*(k-c)+Number(e.label.style.top.replace("px",
"")),f.set(a.label,"top",g+"px"),a.label._autoPositioned=!0):(c=e.rect.top-a.rect.top,d=(a.rect.height-c)/2,n=this.labelTopOffset-d,l=this.labelTopOffset+d,f.set(e.label,"top",l+"px"),f.set(a.label,"top",n+"px"),e.label._autoPositioned=!0,a.label._autoPositioned=!0))})),b[2].handle&&10>b[2].handle.style.top.replace("px","")){var m,t,w,q;a=b[2].label;var p=b[1].label,r=b[0].label,v=a.getBoundingClientRect(),y=p.getBoundingClientRect(),u=r.getBoundingClientRect();a._autoPositioned&&p._autoPositioned&&
r._autoPositioned?(m=Number(a.style.top.replace("px",""))+8,t=Number(p.style.top.replace("px",""))+8,w=Number(r.style.top.replace("px",""))+8,f.set(a,"top",m+"px"),f.set(p,"top",t+"px"),f.set(r,"top",w+"px")):(a._autoPositioned&&(q=Number(a.style.top.replace("px",""))+4,f.set(a,"top",q+"px")),p._autoPositioned&&y.top-v.top<y.height&&(q=Number(p.style.top.replace("px",""))+4,f.set(p,"top",q+"px")),u.top-y.top<u.height&&(q=Number(r.style.top.replace("px",""))+4,f.set(r,"top",q+"px")))}},_autoPositionManyHandles:function(){},
collisionCheck:function(a,b){return!(a.right<b.left||a.left>b.right||a.bottom<b.top||a.top>b.bottom)}}});